<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title> 9 Algorítmico | R para los científicos</title>
  <meta name="description" content="Un guía para adquirir las bases de la programación con R y conducir de forma efectiva su gestión y análisis de datos." />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content=" 9 Algorítmico | R para los científicos" />
  <meta property="og:type" content="book" />
  
  <meta property="og:image" content="myFigures/cover.png" />
  <meta property="og:description" content="Un guía para adquirir las bases de la programación con R y conducir de forma efectiva su gestión y análisis de datos." />
  <meta name="github-repo" content="frareb/myRBook_SP" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content=" 9 Algorítmico | R para los científicos" />
  
  <meta name="twitter:description" content="Un guía para adquirir las bases de la programación con R y conducir de forma efectiva su gestión y análisis de datos." />
  <meta name="twitter:image" content="myFigures/cover.png" />

<meta name="author" content="François Rebaudo" />


<meta name="date" content="2021-02-05" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="import.html"/>
<link rel="next" href="project.html"/>
<script src="libs/jquery-3.5.1/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<script src="libs/htmlwidgets-1.5.3/htmlwidgets.js"></script>
<script src="libs/plotly-binding-4.9.3/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.1.1/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.1.1/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-1.57.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-1.57.1/plotly-latest.min.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-124666641-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-124666641-1');
</script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="myStyle.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Aprender R: iniciación y perfeccionamiento</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Preámbulo</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#remerciements"><i class="fa fa-check"></i><b>1.1</b> Agradecimientos</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#licence"><i class="fa fa-check"></i><b>1.2</b> Licencia</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>2</b> Introducción</a><ul>
<li class="chapter" data-level="2.1" data-path="intro.html"><a href="intro.html#por-qué-aprender-r"><i class="fa fa-check"></i><b>2.1</b> ¿Por qué aprender R?</a></li>
<li class="chapter" data-level="2.2" data-path="intro.html"><a href="intro.html#este-libro"><i class="fa fa-check"></i><b>2.2</b> Este libro</a></li>
<li class="chapter" data-level="2.3" data-path="intro.html"><a href="intro.html#lectura-adicional-en-español"><i class="fa fa-check"></i><b>2.3</b> Lectura adicional en español</a></li>
</ul></li>
<li class="part"><span><b>I Conceptos básicos</b></span></li>
<li class="chapter" data-level="3" data-path="premiersPas.html"><a href="premiersPas.html"><i class="fa fa-check"></i><b>3</b> Primeros pasos</a><ul>
<li class="chapter" data-level="3.1" data-path="premiersPas.html"><a href="premiersPas.html#instalar-r"><i class="fa fa-check"></i><b>3.1</b> Instalar R</a></li>
<li class="chapter" data-level="3.2" data-path="premiersPas.html"><a href="premiersPas.html#r-como-calculadora"><i class="fa fa-check"></i><b>3.2</b> R como calculadora</a><ul>
<li class="chapter" data-level="3.2.1" data-path="premiersPas.html"><a href="premiersPas.html#l011opari"><i class="fa fa-check"></i><b>3.2.1</b> Los operadores aritméticos</a></li>
<li class="chapter" data-level="3.2.2" data-path="premiersPas.html"><a href="premiersPas.html#l011opcomp"><i class="fa fa-check"></i><b>3.2.2</b> Los operadores comparativos</a></li>
<li class="chapter" data-level="3.2.3" data-path="premiersPas.html"><a href="premiersPas.html#l011oplog"><i class="fa fa-check"></i><b>3.2.3</b> Los operadores lógicos</a></li>
<li class="chapter" data-level="3.2.4" data-path="premiersPas.html"><a href="premiersPas.html#ayuda-a-los-operadores"><i class="fa fa-check"></i><b>3.2.4</b> Ayuda a los operadores</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="premiersPas.html"><a href="premiersPas.html#l011object"><i class="fa fa-check"></i><b>3.3</b> El concepto de objeto</a></li>
<li class="chapter" data-level="3.4" data-path="premiersPas.html"><a href="premiersPas.html#los-scripts"><i class="fa fa-check"></i><b>3.4</b> Los scripts</a><ul>
<li class="chapter" data-level="3.4.1" data-path="premiersPas.html"><a href="premiersPas.html#crear-un-script-y-documentarlo"><i class="fa fa-check"></i><b>3.4.1</b> Crear un script y documentarlo</a></li>
<li class="chapter" data-level="3.4.2" data-path="premiersPas.html"><a href="premiersPas.html#ejecutar-un-script"><i class="fa fa-check"></i><b>3.4.2</b> Ejecutar un script</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="premiersPas.html"><a href="premiersPas.html#conclusión"><i class="fa fa-check"></i><b>3.5</b> Conclusión</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="IDE.html"><a href="IDE.html"><i class="fa fa-check"></i><b>4</b> Elegir un entorno de desarrollo</a><ul>
<li class="chapter" data-level="4.1" data-path="IDE.html"><a href="IDE.html#editores-de-texto-y-entorno-de-desarrollo"><i class="fa fa-check"></i><b>4.1</b> Editores de texto y entorno de desarrollo</a></li>
<li class="chapter" data-level="4.2" data-path="IDE.html"><a href="IDE.html#rstudio"><i class="fa fa-check"></i><b>4.2</b> RStudio</a><ul>
<li class="chapter" data-level="4.2.1" data-path="IDE.html"><a href="IDE.html#instalar-rstudio"><i class="fa fa-check"></i><b>4.2.1</b> Instalar RStudio</a></li>
<li class="chapter" data-level="4.2.2" data-path="IDE.html"><a href="IDE.html#un-script-con-rstudio"><i class="fa fa-check"></i><b>4.2.2</b> Un script con RStudio</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="IDE.html"><a href="IDE.html#notepad-avec-npp2r"><i class="fa fa-check"></i><b>4.3</b> Notepad++ avec Npp2R</a><ul>
<li class="chapter" data-level="4.3.1" data-path="IDE.html"><a href="IDE.html#instalar-notepad-solamente-para-windows"><i class="fa fa-check"></i><b>4.3.1</b> Instalar Notepad++ (solamente para Windows)</a></li>
<li class="chapter" data-level="4.3.2" data-path="IDE.html"><a href="IDE.html#instalar-npp2r"><i class="fa fa-check"></i><b>4.3.2</b> Instalar Npp2R</a></li>
<li class="chapter" data-level="4.3.3" data-path="IDE.html"><a href="IDE.html#un-script-con-notepad"><i class="fa fa-check"></i><b>4.3.3</b> Un script con Notepad++</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="IDE.html"><a href="IDE.html#geany"><i class="fa fa-check"></i><b>4.4</b> Geany</a><ul>
<li class="chapter" data-level="4.4.1" data-path="IDE.html"><a href="IDE.html#instalar-geany-para-linux-mac-osx-y-windows"><i class="fa fa-check"></i><b>4.4.1</b> Instalar Geany (para Linux, Mac OSX y Windows)</a></li>
<li class="chapter" data-level="4.4.2" data-path="IDE.html"><a href="IDE.html#un-script-con-geany"><i class="fa fa-check"></i><b>4.4.2</b> Un script con Geany</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="IDE.html"><a href="IDE.html#otras-soluciones"><i class="fa fa-check"></i><b>4.5</b> Otras soluciones</a></li>
<li class="chapter" data-level="4.6" data-path="IDE.html"><a href="IDE.html#conclusión-1"><i class="fa fa-check"></i><b>4.6</b> Conclusión</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="dataType1.html"><a href="dataType1.html"><i class="fa fa-check"></i><b>5</b> Tipos de datos</a><ul>
<li class="chapter" data-level="5.1" data-path="dataType1.html"><a href="dataType1.html#el-tipo-numeric"><i class="fa fa-check"></i><b>5.1</b> El tipo <code>numeric</code></a></li>
<li class="chapter" data-level="5.2" data-path="dataType1.html"><a href="dataType1.html#el-tipo-character"><i class="fa fa-check"></i><b>5.2</b> El tipo <code>character</code></a></li>
<li class="chapter" data-level="5.3" data-path="dataType1.html"><a href="dataType1.html#el-tipo-factor"><i class="fa fa-check"></i><b>5.3</b> El tipo <code>factor</code></a></li>
<li class="chapter" data-level="5.4" data-path="dataType1.html"><a href="dataType1.html#l013logi"><i class="fa fa-check"></i><b>5.4</b> El tipo <code>logical</code></a></li>
<li class="chapter" data-level="5.5" data-path="dataType1.html"><a href="dataType1.html#acerca-de-na"><i class="fa fa-check"></i><b>5.5</b> Acerca de <code>NA</code></a></li>
<li class="chapter" data-level="5.6" data-path="dataType1.html"><a href="dataType1.html#conclusión-2"><i class="fa fa-check"></i><b>5.6</b> Conclusión</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="dataType2.html"><a href="dataType2.html"><i class="fa fa-check"></i><b>6</b> Contenedores de datos</a><ul>
<li class="chapter" data-level="6.1" data-path="dataType2.html"><a href="dataType2.html#l014vector"><i class="fa fa-check"></i><b>6.1</b> El contenedor <code>vector</code></a><ul>
<li class="chapter" data-level="6.1.1" data-path="dataType2.html"><a href="dataType2.html#crear-un-vector"><i class="fa fa-check"></i><b>6.1.1</b> Crear un <code>vector</code></a></li>
<li class="chapter" data-level="6.1.2" data-path="dataType2.html"><a href="dataType2.html#hacer-operaciones-con-un-vector"><i class="fa fa-check"></i><b>6.1.2</b> Hacer operaciones con un <code>vector</code></a></li>
<li class="chapter" data-level="6.1.3" data-path="dataType2.html"><a href="dataType2.html#acceder-a-los-valores-de-un-vector"><i class="fa fa-check"></i><b>6.1.3</b> Acceder a los valores de un <code>vector</code></a></li>
<li class="chapter" data-level="6.1.4" data-path="dataType2.html"><a href="dataType2.html#dar-nombres-a-los-elementos-de-un-vector"><i class="fa fa-check"></i><b>6.1.4</b> Dar nombres a los elementos de un <code>vector</code></a></li>
<li class="chapter" data-level="6.1.5" data-path="dataType2.html"><a href="dataType2.html#editar-los-elementos-de-un-vector"><i class="fa fa-check"></i><b>6.1.5</b> Editar los elementos de un <code>vector</code></a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="dataType2.html"><a href="dataType2.html#l014list"><i class="fa fa-check"></i><b>6.2</b> El contenedor <code>list</code></a><ul>
<li class="chapter" data-level="6.2.1" data-path="dataType2.html"><a href="dataType2.html#crear-una-list"><i class="fa fa-check"></i><b>6.2.1</b> Crear una <code>list</code></a></li>
<li class="chapter" data-level="6.2.2" data-path="dataType2.html"><a href="dataType2.html#acceder-a-los-valores-de-una-list"><i class="fa fa-check"></i><b>6.2.2</b> Acceder a los valores de una <code>list</code></a></li>
<li class="chapter" data-level="6.2.3" data-path="dataType2.html"><a href="dataType2.html#editar-una-list"><i class="fa fa-check"></i><b>6.2.3</b> Editar una <code>list</code></a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="dataType2.html"><a href="dataType2.html#l014dataframe"><i class="fa fa-check"></i><b>6.3</b> El contenedor <code>data.frame</code></a><ul>
<li class="chapter" data-level="6.3.1" data-path="dataType2.html"><a href="dataType2.html#crear-un-data.frame"><i class="fa fa-check"></i><b>6.3.1</b> Crear un <code>data.frame</code></a></li>
<li class="chapter" data-level="6.3.2" data-path="dataType2.html"><a href="dataType2.html#acceder-a-los-elementos-de-un-data.frame"><i class="fa fa-check"></i><b>6.3.2</b> Acceder a los elementos de un <code>data.frame</code></a></li>
<li class="chapter" data-level="6.3.3" data-path="dataType2.html"><a href="dataType2.html#modificar-un-data.frame"><i class="fa fa-check"></i><b>6.3.3</b> Modificar un <code>data.frame</code></a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="dataType2.html"><a href="dataType2.html#l014matrix"><i class="fa fa-check"></i><b>6.4</b> El contenedor <code>matrix</code></a><ul>
<li class="chapter" data-level="6.4.1" data-path="dataType2.html"><a href="dataType2.html#crear-una-matrix"><i class="fa fa-check"></i><b>6.4.1</b> Crear una <code>matrix</code></a></li>
<li class="chapter" data-level="6.4.2" data-path="dataType2.html"><a href="dataType2.html#manipular-y-hacer-operaciones-en-una-matrix"><i class="fa fa-check"></i><b>6.4.2</b> Manipular y hacer operaciones en una <code>matrix</code></a></li>
<li class="chapter" data-level="6.4.3" data-path="dataType2.html"><a href="dataType2.html#acceder-a-los-elementos-de-una-matrix"><i class="fa fa-check"></i><b>6.4.3</b> Acceder a los elementos de una <code>matrix</code></a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="dataType2.html"><a href="dataType2.html#l014array"><i class="fa fa-check"></i><b>6.5</b> El contenedor <code>array</code></a><ul>
<li class="chapter" data-level="6.5.1" data-path="dataType2.html"><a href="dataType2.html#crear-un-array"><i class="fa fa-check"></i><b>6.5.1</b> Crear un <code>array</code></a></li>
<li class="chapter" data-level="6.5.2" data-path="dataType2.html"><a href="dataType2.html#manipular-un-array"><i class="fa fa-check"></i><b>6.5.2</b> Manipular un <code>array</code></a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="dataType2.html"><a href="dataType2.html#conclusión-3"><i class="fa fa-check"></i><b>6.6</b> Conclusión</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="fonctions.html"><a href="fonctions.html"><i class="fa fa-check"></i><b>7</b> Las funciones</a><ul>
<li class="chapter" data-level="7.1" data-path="fonctions.html"><a href="fonctions.html#qué-es-una-función"><i class="fa fa-check"></i><b>7.1</b> ¿Qué es una función?</a></li>
<li class="chapter" data-level="7.2" data-path="fonctions.html"><a href="fonctions.html#las-funciones-más-comunes"><i class="fa fa-check"></i><b>7.2</b> Las funciones más comunes</a><ul>
<li class="chapter" data-level="7.2.1" data-path="fonctions.html"><a href="fonctions.html#el-acceso-a-la-documentación"><i class="fa fa-check"></i><b>7.2.1</b> El acceso a la documentación</a></li>
<li class="chapter" data-level="7.2.2" data-path="fonctions.html"><a href="fonctions.html#ver-los-datos"><i class="fa fa-check"></i><b>7.2.2</b> Ver los datos</a></li>
<li class="chapter" data-level="7.2.3" data-path="fonctions.html"><a href="fonctions.html#manipular-los-datos"><i class="fa fa-check"></i><b>7.2.3</b> Manipular los datos</a></li>
<li class="chapter" data-level="7.2.4" data-path="fonctions.html"><a href="fonctions.html#l015maths"><i class="fa fa-check"></i><b>7.2.4</b> Funciones matemáticas</a></li>
<li class="chapter" data-level="7.2.5" data-path="fonctions.html"><a href="fonctions.html#estadísticas-descriptivas"><i class="fa fa-check"></i><b>7.2.5</b> Estadísticas descriptivas</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="fonctions.html"><a href="fonctions.html#otras-funciones-útiles"><i class="fa fa-check"></i><b>7.3</b> Otras funciones útiles</a><ul>
<li class="chapter" data-level="7.3.1" data-path="fonctions.html"><a href="fonctions.html#l015seqalong"><i class="fa fa-check"></i><b>7.3.1</b> <code>seq_along()</code></a></li>
<li class="chapter" data-level="7.3.2" data-path="fonctions.html"><a href="fonctions.html#l0152points"><i class="fa fa-check"></i><b>7.3.2</b> <code>:</code></a></li>
<li class="chapter" data-level="7.3.3" data-path="fonctions.html"><a href="fonctions.html#l015rep"><i class="fa fa-check"></i><b>7.3.3</b> <code>rep()</code></a></li>
<li class="chapter" data-level="7.3.4" data-path="fonctions.html"><a href="fonctions.html#l015seq"><i class="fa fa-check"></i><b>7.3.4</b> <code>seq()</code></a></li>
<li class="chapter" data-level="7.3.5" data-path="fonctions.html"><a href="fonctions.html#l015getwd"><i class="fa fa-check"></i><b>7.3.5</b> <code>getwd()</code></a></li>
<li class="chapter" data-level="7.3.6" data-path="fonctions.html"><a href="fonctions.html#l015setwd"><i class="fa fa-check"></i><b>7.3.6</b> <code>setwd()</code></a></li>
<li class="chapter" data-level="7.3.7" data-path="fonctions.html"><a href="fonctions.html#l015listfiles"><i class="fa fa-check"></i><b>7.3.7</b> <code>list.files()</code></a></li>
<li class="chapter" data-level="7.3.8" data-path="fonctions.html"><a href="fonctions.html#l015ls"><i class="fa fa-check"></i><b>7.3.8</b> <code>ls()</code></a></li>
<li class="chapter" data-level="7.3.9" data-path="fonctions.html"><a href="fonctions.html#l015rm"><i class="fa fa-check"></i><b>7.3.9</b> <code>rm()</code></a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="fonctions.html"><a href="fonctions.html#algunos-ejercicios-para-practicar"><i class="fa fa-check"></i><b>7.4</b> Algunos ejercicios para practicar</a><ul>
<li class="chapter" data-level="7.4.1" data-path="fonctions.html"><a href="fonctions.html#secuencias"><i class="fa fa-check"></i><b>7.4.1</b> Secuencias</a></li>
<li class="chapter" data-level="7.4.2" data-path="fonctions.html"><a href="fonctions.html#estadísticas-descriptivas-1"><i class="fa fa-check"></i><b>7.4.2</b> Estadísticas descriptivas</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="fonctions.html"><a href="fonctions.html#l015function"><i class="fa fa-check"></i><b>7.5</b> Escribir una función</a></li>
<li class="chapter" data-level="7.6" data-path="fonctions.html"><a href="fonctions.html#otras-funciones-desarrolladas-por-la-comunidad-de-usuarios-los-packages"><i class="fa fa-check"></i><b>7.6</b> Otras funciones desarrolladas por la comunidad de usuarios: los <em>packages</em></a><ul>
<li class="chapter" data-level="7.6.1" data-path="fonctions.html"><a href="fonctions.html#instalar-un-paquete"><i class="fa fa-check"></i><b>7.6.1</b> Instalar un paquete</a></li>
<li class="chapter" data-level="7.6.2" data-path="fonctions.html"><a href="fonctions.html#cargar-un-paquete"><i class="fa fa-check"></i><b>7.6.2</b> Cargar un paquete</a></li>
<li class="chapter" data-level="7.6.3" data-path="fonctions.html"><a href="fonctions.html#portabilidad-del-código"><i class="fa fa-check"></i><b>7.6.3</b> Portabilidad del código</a></li>
</ul></li>
<li class="chapter" data-level="7.7" data-path="fonctions.html"><a href="fonctions.html#conclusión-4"><i class="fa fa-check"></i><b>7.7</b> Conclusión</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="import.html"><a href="import.html"><i class="fa fa-check"></i><b>8</b> Importar y exportar datos</a><ul>
<li class="chapter" data-level="8.1" data-path="import.html"><a href="import.html#l016read"><i class="fa fa-check"></i><b>8.1</b> Leer datos de un archivo</a><ul>
<li class="chapter" data-level="8.1.1" data-path="import.html"><a href="import.html#l016transfo"><i class="fa fa-check"></i><b>8.1.1</b> Transformar datos en formato TXT o CSV</a></li>
<li class="chapter" data-level="8.1.2" data-path="import.html"><a href="import.html#l016readCSV"><i class="fa fa-check"></i><b>8.1.2</b> Leer un archivo CSV</a></li>
<li class="chapter" data-level="8.1.3" data-path="import.html"><a href="import.html#l016readTXT"><i class="fa fa-check"></i><b>8.1.3</b> Leer un archivo de texto</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="import.html"><a href="import.html#l016save"><i class="fa fa-check"></i><b>8.2</b> Guardar datos para R</a></li>
<li class="chapter" data-level="8.3" data-path="import.html"><a href="import.html#l016write"><i class="fa fa-check"></i><b>8.3</b> Exportar datos</a></li>
<li class="chapter" data-level="8.4" data-path="import.html"><a href="import.html#conclusión-5"><i class="fa fa-check"></i><b>8.4</b> Conclusión</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="algo.html"><a href="algo.html"><i class="fa fa-check"></i><b>9</b> Algorítmico</a><ul>
<li class="chapter" data-level="9.1" data-path="algo.html"><a href="algo.html#l17if"><i class="fa fa-check"></i><b>9.1</b> Pruebas lógicas con <code>if</code></a></li>
<li class="chapter" data-level="9.2" data-path="algo.html"><a href="algo.html#l17switch"><i class="fa fa-check"></i><b>9.2</b> Pruebas lógicas con <code>switch</code></a></li>
<li class="chapter" data-level="9.3" data-path="algo.html"><a href="algo.html#l17for"><i class="fa fa-check"></i><b>9.3</b> El bucle <code>for</code></a></li>
<li class="chapter" data-level="9.4" data-path="algo.html"><a href="algo.html#l17while"><i class="fa fa-check"></i><b>9.4</b> El bucle <code>while</code></a></li>
<li class="chapter" data-level="9.5" data-path="algo.html"><a href="algo.html#l17repeat"><i class="fa fa-check"></i><b>9.5</b> El bucle <code>repeat</code></a></li>
<li class="chapter" data-level="9.6" data-path="algo.html"><a href="algo.html#l17spe"><i class="fa fa-check"></i><b>9.6</b> <code>next</code> y <code>break</code></a></li>
<li class="chapter" data-level="9.7" data-path="algo.html"><a href="algo.html#l17applyfamily"><i class="fa fa-check"></i><b>9.7</b> Los bucles de la familia <code>apply</code></a><ul>
<li class="chapter" data-level="9.7.1" data-path="algo.html"><a href="algo.html#l17apply"><i class="fa fa-check"></i><b>9.7.1</b> <code>apply</code></a></li>
<li class="chapter" data-level="9.7.2" data-path="algo.html"><a href="algo.html#l17sapply"><i class="fa fa-check"></i><b>9.7.2</b> <code>lapply</code></a></li>
<li class="chapter" data-level="9.7.3" data-path="algo.html"><a href="algo.html#l17lapply"><i class="fa fa-check"></i><b>9.7.3</b> <code>sapply</code></a></li>
<li class="chapter" data-level="9.7.4" data-path="algo.html"><a href="algo.html#l17tapply"><i class="fa fa-check"></i><b>9.7.4</b> <code>tapply</code></a></li>
<li class="chapter" data-level="9.7.5" data-path="algo.html"><a href="algo.html#l17mapply"><i class="fa fa-check"></i><b>9.7.5</b> <code>mapply</code></a></li>
</ul></li>
<li class="chapter" data-level="9.8" data-path="algo.html"><a href="algo.html#conclusión-6"><i class="fa fa-check"></i><b>9.8</b> Conclusión</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="project.html"><a href="project.html"><i class="fa fa-check"></i><b>10</b> Gestión de proyectos con R</a><ul>
<li class="chapter" data-level="10.1" data-path="project.html"><a href="project.html#gestionando-archivos-y-directorios-de-trabajo."><i class="fa fa-check"></i><b>10.1</b> Gestionando archivos y directorios de trabajo.</a></li>
<li class="chapter" data-level="10.2" data-path="project.html"><a href="project.html#gestión-de-versiones-de-script"><i class="fa fa-check"></i><b>10.2</b> Gestión de versiones de script</a></li>
<li class="chapter" data-level="10.3" data-path="project.html"><a href="project.html#gestion-de-documentacion"><i class="fa fa-check"></i><b>10.3</b> Gestion de documentacion</a></li>
<li class="chapter" data-level="10.4" data-path="project.html"><a href="project.html#conclusión-7"><i class="fa fa-check"></i><b>10.4</b> Conclusión</a></li>
</ul></li>
<li class="part"><span><b>II Los gráficos</b></span></li>
<li class="chapter" data-level="11" data-path="graph1.html"><a href="graph1.html"><i class="fa fa-check"></i><b>11</b> Gráficos simples</a><ul>
<li class="chapter" data-level="11.1" data-path="graph1.html"><a href="graph1.html#graph1plot"><i class="fa fa-check"></i><b>11.1</b> <code>plot</code></a></li>
<li class="chapter" data-level="11.2" data-path="graph1.html"><a href="graph1.html#graph1hist"><i class="fa fa-check"></i><b>11.2</b> <code>hist</code></a></li>
<li class="chapter" data-level="11.3" data-path="graph1.html"><a href="graph1.html#graph1barplot"><i class="fa fa-check"></i><b>11.3</b> <code>barplot</code></a></li>
<li class="chapter" data-level="11.4" data-path="graph1.html"><a href="graph1.html#graph1boxplot"><i class="fa fa-check"></i><b>11.4</b> <code>boxplot</code></a></li>
<li class="chapter" data-level="11.5" data-path="graph1.html"><a href="graph1.html#otros-gráficos"><i class="fa fa-check"></i><b>11.5</b> Otros gráficos</a></li>
<li class="chapter" data-level="11.6" data-path="graph1.html"><a href="graph1.html#conclusión-8"><i class="fa fa-check"></i><b>11.6</b> Conclusión</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="graph2.html"><a href="graph2.html"><i class="fa fa-check"></i><b>12</b> Gestión del color</a><ul>
<li class="chapter" data-level="12.1" data-path="graph2.html"><a href="graph2.html#colors"><i class="fa fa-check"></i><b>12.1</b> <code>colors()</code></a></li>
<li class="chapter" data-level="12.2" data-path="graph2.html"><a href="graph2.html#rgb"><i class="fa fa-check"></i><b>12.2</b> <code>rgb()</code></a></li>
<li class="chapter" data-level="12.3" data-path="graph2.html"><a href="graph2.html#paletas-de-colores"><i class="fa fa-check"></i><b>12.3</b> Paletas de colores</a></li>
<li class="chapter" data-level="12.4" data-path="graph2.html"><a href="graph2.html#conclusión-9"><i class="fa fa-check"></i><b>12.4</b> Conclusión</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="graph3.html"><a href="graph3.html"><i class="fa fa-check"></i><b>13</b> Paquetes gráficos</a><ul>
<li class="chapter" data-level="13.1" data-path="graph3.html"><a href="graph3.html#los-paquetes-con-paletas"><i class="fa fa-check"></i><b>13.1</b> Los paquetes con paletas</a><ul>
<li class="chapter" data-level="13.1.1" data-path="graph3.html"><a href="graph3.html#rcolorbrewer"><i class="fa fa-check"></i><b>13.1.1</b> <code>RColorBrewer</code></a></li>
<li class="chapter" data-level="13.1.2" data-path="graph3.html"><a href="graph3.html#palettesforr"><i class="fa fa-check"></i><b>13.1.2</b> <code>palettesForR</code></a></li>
<li class="chapter" data-level="13.1.3" data-path="graph3.html"><a href="graph3.html#otros-paquetes"><i class="fa fa-check"></i><b>13.1.3</b> Otros paquetes</a></li>
</ul></li>
<li class="chapter" data-level="13.2" data-path="graph3.html"><a href="graph3.html#ggplot2-package"><i class="fa fa-check"></i><b>13.2</b> ggplot2 package</a></li>
<li class="chapter" data-level="13.3" data-path="graph3.html"><a href="graph3.html#gráficos-interactivos-y-dinámicos-con-plotly"><i class="fa fa-check"></i><b>13.3</b> Gráficos interactivos y dinámicos con <code>Plotly</code></a></li>
<li class="chapter" data-level="13.4" data-path="graph3.html"><a href="graph3.html#conclusión-10"><i class="fa fa-check"></i><b>13.4</b> Conclusión</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="graph4.html"><a href="graph4.html"><i class="fa fa-check"></i><b>14</b> De la gráfica a la figura en un artículo científico</a><ul>
<li class="chapter" data-level="14.1" data-path="graph4.html"><a href="graph4.html#inkscape"><i class="fa fa-check"></i><b>14.1</b> Inkscape</a></li>
<li class="chapter" data-level="14.2" data-path="graph4.html"><a href="graph4.html#the-gimp"><i class="fa fa-check"></i><b>14.2</b> The Gimp</a></li>
<li class="chapter" data-level="14.3" data-path="graph4.html"><a href="graph4.html#tabla-de-referencia"><i class="fa fa-check"></i><b>14.3</b> Tabla de referencia</a></li>
</ul></li>
<li class="part"><span><b>III Estudio de caso</b></span></li>
<li class="chapter" data-level="15" data-path="studyCase1.html"><a href="studyCase1.html"><i class="fa fa-check"></i><b>15</b> Analizar datos de loggers de temperatura</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R para los científicos</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="algo" class="section level1">
<h1><span class="header-section-number"> 9</span> Algorítmico</h1>
<div id="l17if" class="section level2">
<h2><span class="header-section-number">9.1</span> Pruebas lógicas con <code>if</code></h2>
<p>Si queremos realizar una operación diferente según una condición, podemos configurar una prueba lógica del tipo <strong>SI</strong> <em>esto</em> <strong>ENTONCES</strong> <em>esto</em> <strong>SINO</strong> <em>esto</em>. Con R esto dará como resultado la función <code>if(cond) cons.express alt.expr</code> como se muestra en la función help.</p>
<div class="sourceCode" id="cb992"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb992-1"><a href="algo.html#cb992-1"></a>myVar &lt;-<span class="st"> </span><span class="dv">2</span></span>
<span id="cb992-2"><a href="algo.html#cb992-2"></a><span class="cf">if</span>(myVar <span class="op">&lt;</span><span class="st"> </span><span class="dv">3</span>) <span class="kw">print</span>(<span class="st">&quot;myVar &lt; 3&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;myVar &lt; 3&quot;</code></pre>
<div class="sourceCode" id="cb994"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb994-1"><a href="algo.html#cb994-1"></a><span class="cf">if</span>(myVar <span class="op">&lt;</span><span class="st"> </span><span class="dv">3</span>) <span class="kw">print</span>(<span class="st">&quot;myVar &lt; 3&quot;</span>) <span class="cf">else</span> <span class="kw">print</span>(<span class="st">&quot;myVar &gt; 3&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;myVar &lt; 3&quot;</code></pre>
<p>Cuando hay varias líneas de código para ejecutar basadas en la prueba lógica, o simplemente para hacer que el código sea más fácil de leer, utilizamos varias líneas con <code>{}</code> y con identacion.</p>
<div class="sourceCode" id="cb996"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb996-1"><a href="algo.html#cb996-1"></a>myVar &lt;-<span class="st"> </span><span class="dv">2</span></span>
<span id="cb996-2"><a href="algo.html#cb996-2"></a>myResult &lt;-<span class="st"> </span><span class="dv">0</span></span>
<span id="cb996-3"><a href="algo.html#cb996-3"></a><span class="cf">if</span>(myVar <span class="op">&lt;</span><span class="st"> </span><span class="dv">3</span>){</span>
<span id="cb996-4"><a href="algo.html#cb996-4"></a>  <span class="kw">print</span>(<span class="st">&quot;myVar &lt; 3&quot;</span>)</span>
<span id="cb996-5"><a href="algo.html#cb996-5"></a>  myResult &lt;-<span class="st"> </span>myVar <span class="op">+</span><span class="st"> </span><span class="dv">10</span></span>
<span id="cb996-6"><a href="algo.html#cb996-6"></a>} <span class="cf">else</span> {</span>
<span id="cb996-7"><a href="algo.html#cb996-7"></a>  <span class="kw">print</span>(<span class="st">&quot;myVar &gt; 3&quot;</span>)</span>
<span id="cb996-8"><a href="algo.html#cb996-8"></a>  myResult &lt;-<span class="st"> </span>myVar <span class="op">-</span><span class="st"> </span><span class="dv">10</span></span>
<span id="cb996-9"><a href="algo.html#cb996-9"></a>}</span></code></pre></div>
<pre><code>## [1] &quot;myVar &lt; 3&quot;</code></pre>
<div class="sourceCode" id="cb998"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb998-1"><a href="algo.html#cb998-1"></a><span class="kw">print</span>(myResult)</span></code></pre></div>
<pre><code>## [1] 12</code></pre>
<p>En este ejemplo definimos una variable <code>myVar</code>. Si esta variable es menor que 3, la variable <code>myResult</code> se establece en <code>myVar + 10</code>, y de lo contrario <code>myResult</code> se establece en <code>myVar - 10</code>.</p>
<p>Ya hemos visto el uso de la prueba lógica <code>if</code> en el <a href="fonctions.html#l015function">capítulo sobre las funciones</a>. Habiamos probado si la variable ingresada como argumento en nuestra función era de tipo <code>character</code>.</p>
<div class="sourceCode" id="cb1000"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1000-1"><a href="algo.html#cb1000-1"></a>myVar &lt;-<span class="st"> &quot;qwerty&quot;</span></span>
<span id="cb1000-2"><a href="algo.html#cb1000-2"></a><span class="cf">if</span>(<span class="kw">is.character</span>(myVar)){</span>
<span id="cb1000-3"><a href="algo.html#cb1000-3"></a>  <span class="kw">print</span>(<span class="st">&quot;ok&quot;</span>)</span>
<span id="cb1000-4"><a href="algo.html#cb1000-4"></a>} <span class="cf">else</span> {</span>
<span id="cb1000-5"><a href="algo.html#cb1000-5"></a>  <span class="kw">print</span>(<span class="st">&quot;error&quot;</span>)</span>
<span id="cb1000-6"><a href="algo.html#cb1000-6"></a>}</span></code></pre></div>
<pre><code>## [1] &quot;ok&quot;</code></pre>
<p>También podemos anidar pruebas lógicas entre sí.</p>
<div class="sourceCode" id="cb1002"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1002-1"><a href="algo.html#cb1002-1"></a>myVar &lt;-<span class="st"> </span><span class="ot">TRUE</span></span>
<span id="cb1002-2"><a href="algo.html#cb1002-2"></a><span class="cf">if</span>(<span class="kw">is.character</span>(myVar)){</span>
<span id="cb1002-3"><a href="algo.html#cb1002-3"></a>  <span class="kw">print</span>(<span class="st">&quot;myVar: character&quot;</span>)</span>
<span id="cb1002-4"><a href="algo.html#cb1002-4"></a>} <span class="cf">else</span> {</span>
<span id="cb1002-5"><a href="algo.html#cb1002-5"></a>  <span class="cf">if</span>(<span class="kw">is.numeric</span>(myVar)){</span>
<span id="cb1002-6"><a href="algo.html#cb1002-6"></a>    <span class="kw">print</span>(<span class="st">&quot;myVar: numeric&quot;</span>)</span>
<span id="cb1002-7"><a href="algo.html#cb1002-7"></a>  } <span class="cf">else</span> {</span>
<span id="cb1002-8"><a href="algo.html#cb1002-8"></a>    <span class="cf">if</span>(<span class="kw">is.logical</span>(myVar)){</span>
<span id="cb1002-9"><a href="algo.html#cb1002-9"></a>      <span class="kw">print</span>(<span class="st">&quot;myVar: logical&quot;</span>)</span>
<span id="cb1002-10"><a href="algo.html#cb1002-10"></a>    } <span class="cf">else</span> {</span>
<span id="cb1002-11"><a href="algo.html#cb1002-11"></a>      <span class="kw">print</span>(<span class="st">&quot;myVar: ...&quot;</span>)</span>
<span id="cb1002-12"><a href="algo.html#cb1002-12"></a>    }</span>
<span id="cb1002-13"><a href="algo.html#cb1002-13"></a>  }</span>
<span id="cb1002-14"><a href="algo.html#cb1002-14"></a>}</span></code></pre></div>
<pre><code>## [1] &quot;myVar: logical&quot;</code></pre>
<p>También es posible estipular varias condiciones, como vimos en el capítulo sobre <a href="premiersPas.html#l011opcomp">operadores de comparación</a>.</p>
<div class="sourceCode" id="cb1004"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1004-1"><a href="algo.html#cb1004-1"></a>myVar &lt;-<span class="st"> </span><span class="dv">2</span></span>
<span id="cb1004-2"><a href="algo.html#cb1004-2"></a><span class="cf">if</span>(myVar <span class="op">&gt;</span><span class="st"> </span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>myVar <span class="op">&lt;</span><span class="st"> </span><span class="dv">50</span>){</span>
<span id="cb1004-3"><a href="algo.html#cb1004-3"></a>  <span class="kw">print</span>(<span class="st">&quot;ok&quot;</span>)</span>
<span id="cb1004-4"><a href="algo.html#cb1004-4"></a>}</span></code></pre></div>
<pre><code>## [1] &quot;ok&quot;</code></pre>
<p>En este ejemplo, <code>myVar</code> está en formato <code>numeric</code>, por lo que la primera condición (<code>&gt; 1</code>) y la segunda condición (<code>&lt; 50</code>) son verificables. Por otro lado, si asignamos una variable de tipo <code>character</code> a <code>myVar</code> entonces R transformará 0 y 10 en objetos de tipo <code>character</code> y probará si <code>myVar&gt; "1"</code> y despues si <code>myVar &lt; "50"</code> basandose en la clasificación alfabética. En el siguiente ejemplo, <code>"azerty"</code> no está ubicado segun el orden alfabético entre <code>"1"</code> y <code>"50"</code>, pero para <code>"2azerty"</code> es el caso, lo que resulta problematico.</p>
<div class="sourceCode" id="cb1006"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1006-1"><a href="algo.html#cb1006-1"></a>myVar &lt;-<span class="st"> &quot;azerty&quot;</span></span>
<span id="cb1006-2"><a href="algo.html#cb1006-2"></a>limInit &lt;-<span class="st"> </span><span class="dv">1</span></span>
<span id="cb1006-3"><a href="algo.html#cb1006-3"></a>limEnd &lt;-<span class="st"> </span><span class="dv">50</span></span>
<span id="cb1006-4"><a href="algo.html#cb1006-4"></a><span class="cf">if</span>(myVar <span class="op">&gt;</span><span class="st"> </span>limInit <span class="op">&amp;</span><span class="st"> </span>myVar <span class="op">&lt;</span><span class="st"> </span>limEnd){</span>
<span id="cb1006-5"><a href="algo.html#cb1006-5"></a>  <span class="kw">print</span>(<span class="kw">paste0</span>(myVar, <span class="st">&quot; is between &quot;</span>, limInit, <span class="st">&quot; and &quot;</span>, limEnd, <span class="st">&quot;.&quot;</span>))</span>
<span id="cb1006-6"><a href="algo.html#cb1006-6"></a>} <span class="cf">else</span> {</span>
<span id="cb1006-7"><a href="algo.html#cb1006-7"></a>  <span class="kw">print</span>(<span class="kw">paste0</span>(myVar, <span class="st">&quot; not between &quot;</span>, limInit, <span class="st">&quot; and &quot;</span>, limEnd, <span class="st">&quot;.&quot;</span>))</span>
<span id="cb1006-8"><a href="algo.html#cb1006-8"></a>}</span></code></pre></div>
<pre><code>## [1] &quot;azerty not between 1 and 50.&quot;</code></pre>
<div class="sourceCode" id="cb1008"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1008-1"><a href="algo.html#cb1008-1"></a>myVar &lt;-<span class="st"> &quot;2azerty&quot;</span></span>
<span id="cb1008-2"><a href="algo.html#cb1008-2"></a><span class="cf">if</span>(myVar <span class="op">&gt;</span><span class="st"> </span>limInit <span class="op">&amp;</span><span class="st"> </span>myVar <span class="op">&lt;</span><span class="st"> </span>limEnd){</span>
<span id="cb1008-3"><a href="algo.html#cb1008-3"></a>  <span class="kw">print</span>(<span class="kw">paste0</span>(myVar, <span class="st">&quot; is between &quot;</span>, limInit, <span class="st">&quot; and &quot;</span>, limEnd, <span class="st">&quot;.&quot;</span>))</span>
<span id="cb1008-4"><a href="algo.html#cb1008-4"></a>} <span class="cf">else</span> {</span>
<span id="cb1008-5"><a href="algo.html#cb1008-5"></a>  <span class="kw">print</span>(<span class="kw">paste0</span>(myVar, <span class="st">&quot; not between &quot;</span>, limInit, <span class="st">&quot; and &quot;</span>, limEnd, <span class="st">&quot;.&quot;</span>))</span>
<span id="cb1008-6"><a href="algo.html#cb1008-6"></a>}</span></code></pre></div>
<pre><code>## [1] &quot;2azerty is between 1 and 50.&quot;</code></pre>
<p>Entonces, lo que nos gustaría hacer es probar si <code>myVar</code> está en formato <code>numeric</code>, y entonces solo si es el caso probar las siguientes condiciones.</p>
<div class="sourceCode" id="cb1010"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1010-1"><a href="algo.html#cb1010-1"></a>myVar &lt;-<span class="st"> &quot;2azerty&quot;</span></span>
<span id="cb1010-2"><a href="algo.html#cb1010-2"></a><span class="cf">if</span>(<span class="kw">is.numeric</span>(myVar)){</span>
<span id="cb1010-3"><a href="algo.html#cb1010-3"></a>  <span class="cf">if</span>(myVar <span class="op">&gt;</span><span class="st"> </span>limInit <span class="op">&amp;</span><span class="st"> </span>myVar <span class="op">&lt;</span><span class="st"> </span>limEnd){</span>
<span id="cb1010-4"><a href="algo.html#cb1010-4"></a>    <span class="kw">print</span>(<span class="kw">paste0</span>(myVar, <span class="st">&quot; is between &quot;</span>, limInit, <span class="st">&quot; and &quot;</span>, limEnd, <span class="st">&quot;.&quot;</span>))</span>
<span id="cb1010-5"><a href="algo.html#cb1010-5"></a>  } <span class="cf">else</span> {</span>
<span id="cb1010-6"><a href="algo.html#cb1010-6"></a>    <span class="kw">print</span>(<span class="kw">paste0</span>(myVar, <span class="st">&quot; not between &quot;</span>, limInit, <span class="st">&quot; and &quot;</span>, limEnd, <span class="st">&quot;.&quot;</span>))</span>
<span id="cb1010-7"><a href="algo.html#cb1010-7"></a>  }</span>
<span id="cb1010-8"><a href="algo.html#cb1010-8"></a>} <span class="cf">else</span> {</span>
<span id="cb1010-9"><a href="algo.html#cb1010-9"></a>  <span class="kw">print</span>(<span class="kw">paste0</span>(<span class="st">&quot;Object &quot;</span>, myVar, <span class="st">&quot; is not numeric&quot;</span>))</span>
<span id="cb1010-10"><a href="algo.html#cb1010-10"></a>}</span></code></pre></div>
<pre><code>## [1] &quot;Object 2azerty is not numeric&quot;</code></pre>
<p>A veces es posible que necesitemos probar una primera condición y luego una segunda condición solo si la primera es verdadera en la misma prueba. Por ejemplo, para un sitio nos gustaría saber si hay una sola especie y probar si su abundancia es mayor que 10. Imagine un conjunto de datos con abundancia de vectores. Probaremos el número de especies con la función <a href="fonctions.html#l015length"><code>length()</code></a>.</p>
<div class="sourceCode" id="cb1012"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1012-1"><a href="algo.html#cb1012-1"></a>mySpecies &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">15</span>, <span class="dv">14</span>, <span class="dv">20</span>, <span class="dv">12</span>)</span>
<span id="cb1012-2"><a href="algo.html#cb1012-2"></a><span class="cf">if</span>(<span class="kw">length</span>(mySpecies) <span class="op">==</span><span class="st"> </span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>mySpecies <span class="op">&gt;</span><span class="st"> </span><span class="dv">10</span>){</span>
<span id="cb1012-3"><a href="algo.html#cb1012-3"></a>  <span class="kw">print</span>(<span class="st">&quot;ok!&quot;</span>)</span>
<span id="cb1012-4"><a href="algo.html#cb1012-4"></a>}</span>
<span id="cb1012-5"><a href="algo.html#cb1012-5"></a><span class="co">## Warning message:</span></span>
<span id="cb1012-6"><a href="algo.html#cb1012-6"></a><span class="co">## In if (length(mySpecies) == 1 &amp; mySpecies &gt; 10) { :</span></span>
<span id="cb1012-7"><a href="algo.html#cb1012-7"></a><span class="co">##   the condition has length &gt; 1 and only the first element will be used</span></span></code></pre></div>
<p>R devuelve un error porque no puede dentro de una prueba lógica con <code>if()</code> verificar la segunda condición. De hecho, <code>mySpecies &gt; 10</code> devuelve <code>TRUE TRUE TRUE TRUE TRUE</code>. Podemos separar el código en dos condiciones:</p>
<div class="sourceCode" id="cb1013"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1013-1"><a href="algo.html#cb1013-1"></a>mySpecies &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">15</span>, <span class="dv">14</span>, <span class="dv">20</span>, <span class="dv">12</span>)</span>
<span id="cb1013-2"><a href="algo.html#cb1013-2"></a><span class="cf">if</span>(<span class="kw">length</span>(mySpecies) <span class="op">==</span><span class="st"> </span><span class="dv">1</span>){</span>
<span id="cb1013-3"><a href="algo.html#cb1013-3"></a>  <span class="cf">if</span>(mySpecies <span class="op">&gt;</span><span class="st"> </span><span class="dv">10</span>){</span>
<span id="cb1013-4"><a href="algo.html#cb1013-4"></a>    <span class="kw">print</span>(<span class="st">&quot;ok!&quot;</span>)</span>
<span id="cb1013-5"><a href="algo.html#cb1013-5"></a>  }</span>
<span id="cb1013-6"><a href="algo.html#cb1013-6"></a>}</span></code></pre></div>
<p>Una alternativa más elegante es decirle a R que verifique la segunda condición solo si la primera es verdadera. Para eso podemos usar <code>&amp;&amp;</code> en lugar de <code>&amp;</code>.</p>
<div class="sourceCode" id="cb1014"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1014-1"><a href="algo.html#cb1014-1"></a>mySpecies &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">15</span>, <span class="dv">14</span>, <span class="dv">20</span>, <span class="dv">12</span>)</span>
<span id="cb1014-2"><a href="algo.html#cb1014-2"></a><span class="cf">if</span>(<span class="kw">length</span>(mySpecies) <span class="op">==</span><span class="st"> </span><span class="dv">1</span> <span class="op">&amp;&amp;</span><span class="st"> </span>mySpecies <span class="op">&gt;</span><span class="st"> </span><span class="dv">10</span>){</span>
<span id="cb1014-3"><a href="algo.html#cb1014-3"></a>  <span class="kw">print</span>(<span class="st">&quot;ok!&quot;</span>)</span>
<span id="cb1014-4"><a href="algo.html#cb1014-4"></a>}</span>
<span id="cb1014-5"><a href="algo.html#cb1014-5"></a>mySpecies &lt;-<span class="st"> </span><span class="dv">15</span></span>
<span id="cb1014-6"><a href="algo.html#cb1014-6"></a><span class="cf">if</span>(<span class="kw">length</span>(mySpecies) <span class="op">==</span><span class="st"> </span><span class="dv">1</span> <span class="op">&amp;&amp;</span><span class="st"> </span>mySpecies <span class="op">&gt;</span><span class="st"> </span><span class="dv">10</span>){</span>
<span id="cb1014-7"><a href="algo.html#cb1014-7"></a>  <span class="kw">print</span>(<span class="st">&quot;ok!&quot;</span>)</span>
<span id="cb1014-8"><a href="algo.html#cb1014-8"></a>}</span></code></pre></div>
<pre><code>## [1] &quot;ok!&quot;</code></pre>
<div class="sourceCode" id="cb1016"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1016-1"><a href="algo.html#cb1016-1"></a>mySpecies &lt;-<span class="st"> </span><span class="dv">5</span></span>
<span id="cb1016-2"><a href="algo.html#cb1016-2"></a><span class="cf">if</span>(<span class="kw">length</span>(mySpecies) <span class="op">==</span><span class="st"> </span><span class="dv">1</span> <span class="op">&amp;&amp;</span><span class="st"> </span>mySpecies <span class="op">&gt;</span><span class="st"> </span><span class="dv">10</span>){</span>
<span id="cb1016-3"><a href="algo.html#cb1016-3"></a>  <span class="kw">print</span>(<span class="st">&quot;ok!&quot;</span>)</span>
<span id="cb1016-4"><a href="algo.html#cb1016-4"></a>}</span></code></pre></div>
<p>Con <code>&amp;</code> R comprobará todas las condiciones, y con <code>&amp;&amp;</code> R tomará cada condición una después de la otra y continuará solo si es verdadera. Esto puede parecer anecdótico, pero es bueno saber la diferencia entre <code>&amp;</code> y <code>&amp;&amp;</code> porque a menudo los encontramos en los códigos disponibles en Internet o en los paquetes.</p>
</div>
<div id="l17switch" class="section level2">
<h2><span class="header-section-number">9.2</span> Pruebas lógicas con <code>switch</code></h2>
<p>La función <code>switch()</code> es una variante de <code>if()</code> que es útil cuando tenemos muchas opciones posibles para la misma expresión. El siguiente ejemplo muestra cómo transformar el código usando <code>if()</code> a <code>switch()</code>.</p>
<div class="sourceCode" id="cb1017"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1017-1"><a href="algo.html#cb1017-1"></a>x &lt;-<span class="st"> &quot;aa&quot;</span></span>
<span id="cb1017-2"><a href="algo.html#cb1017-2"></a><span class="cf">if</span>(x <span class="op">==</span><span class="st"> &quot;a&quot;</span>){</span>
<span id="cb1017-3"><a href="algo.html#cb1017-3"></a>  result &lt;-<span class="st"> </span><span class="dv">1</span></span>
<span id="cb1017-4"><a href="algo.html#cb1017-4"></a>}</span>
<span id="cb1017-5"><a href="algo.html#cb1017-5"></a><span class="cf">if</span>(x <span class="op">==</span><span class="st"> &quot;aa&quot;</span>){</span>
<span id="cb1017-6"><a href="algo.html#cb1017-6"></a>  result &lt;-<span class="st"> </span><span class="dv">2</span></span>
<span id="cb1017-7"><a href="algo.html#cb1017-7"></a>}</span>
<span id="cb1017-8"><a href="algo.html#cb1017-8"></a><span class="cf">if</span>(x <span class="op">==</span><span class="st"> &quot;aaa&quot;</span>){</span>
<span id="cb1017-9"><a href="algo.html#cb1017-9"></a>  result &lt;-<span class="st"> </span><span class="dv">3</span></span>
<span id="cb1017-10"><a href="algo.html#cb1017-10"></a>}</span>
<span id="cb1017-11"><a href="algo.html#cb1017-11"></a><span class="cf">if</span>(x <span class="op">==</span><span class="st"> &quot;aaaa&quot;</span>){</span>
<span id="cb1017-12"><a href="algo.html#cb1017-12"></a>  result &lt;-<span class="st"> </span><span class="dv">4</span></span>
<span id="cb1017-13"><a href="algo.html#cb1017-13"></a>}</span>
<span id="cb1017-14"><a href="algo.html#cb1017-14"></a><span class="kw">print</span>(result)</span></code></pre></div>
<pre><code>## [1] 2</code></pre>
<div class="sourceCode" id="cb1019"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1019-1"><a href="algo.html#cb1019-1"></a>x &lt;-<span class="st"> &quot;aa&quot;</span></span>
<span id="cb1019-2"><a href="algo.html#cb1019-2"></a><span class="cf">switch</span>(x, </span>
<span id="cb1019-3"><a href="algo.html#cb1019-3"></a>  <span class="dt">a =</span> result &lt;-<span class="st"> </span><span class="dv">1</span>,</span>
<span id="cb1019-4"><a href="algo.html#cb1019-4"></a>  <span class="dt">aa =</span> result &lt;-<span class="st"> </span><span class="dv">2</span>,</span>
<span id="cb1019-5"><a href="algo.html#cb1019-5"></a>  <span class="dt">aaa =</span> result &lt;-<span class="st"> </span><span class="dv">3</span>,</span>
<span id="cb1019-6"><a href="algo.html#cb1019-6"></a>  <span class="dt">aaaa =</span> result &lt;-<span class="st"> </span><span class="dv">4</span>)</span>
<span id="cb1019-7"><a href="algo.html#cb1019-7"></a><span class="kw">print</span>(result)</span></code></pre></div>
<pre><code>## [1] 2</code></pre>
</div>
<div id="l17for" class="section level2">
<h2><span class="header-section-number">9.3</span> El bucle <code>for</code></h2>
<p>En programación, cuando tenemos que repetir la misma línea de código varias veces, es un signo que indica que debemos usar un <strong>bucle</strong>. Un bucle es una forma de iterar sobre un conjunto de objetos (o los elementos de un objeto) y repetir una operación. Imaginamos un <code>data.frame</code> con mediciones de datos de campo en dos fechas.</p>
<div class="sourceCode" id="cb1021"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1021-1"><a href="algo.html#cb1021-1"></a>bdd &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">date01 =</span> <span class="kw">rnorm</span>(<span class="dt">n =</span> <span class="dv">100</span>, <span class="dt">mean =</span> <span class="dv">10</span>, <span class="dt">sd =</span> <span class="dv">1</span>), </span>
<span id="cb1021-2"><a href="algo.html#cb1021-2"></a>                  <span class="dt">date02 =</span> <span class="kw">rnorm</span>(<span class="dt">n =</span> <span class="dv">100</span>, <span class="dt">mean =</span> <span class="dv">10</span>, <span class="dt">sd =</span> <span class="dv">1</span>))</span>
<span id="cb1021-3"><a href="algo.html#cb1021-3"></a><span class="kw">print</span>(<span class="kw">head</span>(bdd))</span></code></pre></div>
<pre><code>##      date01    date02
## 1  9.719458  8.705486
## 2 10.615751  8.970232
## 3 11.489622  9.578997
## 4 10.969352  9.996233
## 5 10.763592  8.006116
## 6  8.043056 10.352328</code></pre>
<p>Nos gustaría cuantificar la diferencia entre la primera y la segunda fecha, luego poner un indicador para saber si esta diferencia es pequeña o grande, por ejemplo, con un umbral arbitrario de 3. Entonces, para cada línea podríamos hacer:</p>
<div class="sourceCode" id="cb1023"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1023-1"><a href="algo.html#cb1023-1"></a>bdd<span class="op">$</span>dif &lt;-<span class="st"> </span><span class="ot">NA</span></span>
<span id="cb1023-2"><a href="algo.html#cb1023-2"></a>bdd<span class="op">$</span>isDifBig &lt;-<span class="st"> </span><span class="ot">NA</span></span>
<span id="cb1023-3"><a href="algo.html#cb1023-3"></a></span>
<span id="cb1023-4"><a href="algo.html#cb1023-4"></a>bdd<span class="op">$</span>dif[<span class="dv">1</span>] &lt;-<span class="st"> </span><span class="kw">sqrt</span>((bdd<span class="op">$</span>date01[<span class="dv">1</span>] <span class="op">-</span><span class="st"> </span>bdd<span class="op">$</span>date02[<span class="dv">1</span>])<span class="op">^</span><span class="dv">2</span>)</span>
<span id="cb1023-5"><a href="algo.html#cb1023-5"></a>bdd<span class="op">$</span>dif[<span class="dv">2</span>] &lt;-<span class="st"> </span><span class="kw">sqrt</span>((bdd<span class="op">$</span>date01[<span class="dv">2</span>] <span class="op">-</span><span class="st"> </span>bdd<span class="op">$</span>date02[<span class="dv">2</span>])<span class="op">^</span><span class="dv">2</span>)</span>
<span id="cb1023-6"><a href="algo.html#cb1023-6"></a>bdd<span class="op">$</span>dif[<span class="dv">3</span>] &lt;-<span class="st"> </span><span class="kw">sqrt</span>((bdd<span class="op">$</span>date01[<span class="dv">3</span>] <span class="op">-</span><span class="st"> </span>bdd<span class="op">$</span>date02[<span class="dv">3</span>])<span class="op">^</span><span class="dv">2</span>)</span>
<span id="cb1023-7"><a href="algo.html#cb1023-7"></a><span class="co"># ...</span></span>
<span id="cb1023-8"><a href="algo.html#cb1023-8"></a>bdd<span class="op">$</span>dif[<span class="dv">100</span>] &lt;-<span class="st"> </span><span class="kw">sqrt</span>((bdd<span class="op">$</span>date01[<span class="dv">100</span>] <span class="op">-</span><span class="st"> </span>bdd<span class="op">$</span>date02[<span class="dv">100</span>])<span class="op">^</span><span class="dv">2</span>)</span>
<span id="cb1023-9"><a href="algo.html#cb1023-9"></a></span>
<span id="cb1023-10"><a href="algo.html#cb1023-10"></a><span class="cf">if</span>(bdd<span class="op">$</span>dif[<span class="dv">1</span>] <span class="op">&gt;</span><span class="st"> </span><span class="dv">3</span>){</span>
<span id="cb1023-11"><a href="algo.html#cb1023-11"></a>  bdd<span class="op">$</span>isDifBig[<span class="dv">1</span>] &lt;-<span class="st"> &quot;big&quot;</span></span>
<span id="cb1023-12"><a href="algo.html#cb1023-12"></a>}<span class="cf">else</span>{</span>
<span id="cb1023-13"><a href="algo.html#cb1023-13"></a>  bdd<span class="op">$</span>isDifBig[<span class="dv">1</span>] &lt;-<span class="st"> &quot;small&quot;</span></span>
<span id="cb1023-14"><a href="algo.html#cb1023-14"></a>}</span>
<span id="cb1023-15"><a href="algo.html#cb1023-15"></a><span class="cf">if</span>(bdd<span class="op">$</span>dif[<span class="dv">2</span>] <span class="op">&gt;</span><span class="st"> </span><span class="dv">3</span>){</span>
<span id="cb1023-16"><a href="algo.html#cb1023-16"></a>  bdd<span class="op">$</span>isDifBig[<span class="dv">2</span>] &lt;-<span class="st"> &quot;big&quot;</span></span>
<span id="cb1023-17"><a href="algo.html#cb1023-17"></a>}<span class="cf">else</span>{</span>
<span id="cb1023-18"><a href="algo.html#cb1023-18"></a>  bdd<span class="op">$</span>isDifBig[<span class="dv">2</span>] &lt;-<span class="st"> &quot;small&quot;</span></span>
<span id="cb1023-19"><a href="algo.html#cb1023-19"></a>}</span>
<span id="cb1023-20"><a href="algo.html#cb1023-20"></a><span class="cf">if</span>(bdd<span class="op">$</span>dif[<span class="dv">3</span>] <span class="op">&gt;</span><span class="st"> </span><span class="dv">3</span>){</span>
<span id="cb1023-21"><a href="algo.html#cb1023-21"></a>  bdd<span class="op">$</span>isDifBig[<span class="dv">3</span>] &lt;-<span class="st"> &quot;big&quot;</span></span>
<span id="cb1023-22"><a href="algo.html#cb1023-22"></a>}<span class="cf">else</span>{</span>
<span id="cb1023-23"><a href="algo.html#cb1023-23"></a>  bdd<span class="op">$</span>isDifBig[<span class="dv">3</span>] &lt;-<span class="st"> &quot;small&quot;</span></span>
<span id="cb1023-24"><a href="algo.html#cb1023-24"></a>}</span>
<span id="cb1023-25"><a href="algo.html#cb1023-25"></a><span class="co"># ...</span></span>
<span id="cb1023-26"><a href="algo.html#cb1023-26"></a><span class="cf">if</span>(bdd<span class="op">$</span>dif[<span class="dv">100</span>] <span class="op">&gt;</span><span class="st"> </span><span class="dv">3</span>){</span>
<span id="cb1023-27"><a href="algo.html#cb1023-27"></a>  bdd<span class="op">$</span>isDifBig[<span class="dv">100</span>] &lt;-<span class="st"> &quot;big&quot;</span></span>
<span id="cb1023-28"><a href="algo.html#cb1023-28"></a>}<span class="cf">else</span>{</span>
<span id="cb1023-29"><a href="algo.html#cb1023-29"></a>  bdd<span class="op">$</span>isDifBig[<span class="dv">100</span>] &lt;-<span class="st"> &quot;small&quot;</span></span>
<span id="cb1023-30"><a href="algo.html#cb1023-30"></a>}</span></code></pre></div>
<p>Esta forma de hacer las cosas sería extremadamente tediosa de lograr, y casi imposible de lograr si la tabla contuviera 1000 o 100000 líneas. Puede parecer lógico querer iterar sobre las líneas de nuestro <code>data.frame</code> para obtener las nuevas columnas. Es lo que vamos a hacer aun que no es la solución que retendremos más adelante.</p>
<p>Vamos a usar un bucle <code>for()</code>. El bucle <code>for()</code> recorrerá los elementos de un objeto que vamos a dar como argumento. Por ejemplo, aquí hay un bucle que para todos los números del 3 al 9 calculará su valor al cuadrado. El valor actual del número está simbolizado por un objeto que puede tomar el nombre que queramos (aquí será <code>i</code>).</p>
<div class="sourceCode" id="cb1024"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1024-1"><a href="algo.html#cb1024-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="kw">c</span>(<span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>)){</span>
<span id="cb1024-2"><a href="algo.html#cb1024-2"></a>  <span class="kw">print</span>(i<span class="op">^</span><span class="dv">2</span>)</span>
<span id="cb1024-3"><a href="algo.html#cb1024-3"></a>}</span></code></pre></div>
<pre><code>## [1] 9
## [1] 16
## [1] 25
## [1] 36
## [1] 49
## [1] 64
## [1] 81</code></pre>
<p>Eso podemos mejorar usando <a href="fonctions.html#l0152points">la función <code>:</code></a>.</p>
<div class="sourceCode" id="cb1026"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1026-1"><a href="algo.html#cb1026-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">3</span><span class="op">:</span><span class="dv">9</span>){</span>
<span id="cb1026-2"><a href="algo.html#cb1026-2"></a>  <span class="kw">print</span>(i<span class="op">^</span><span class="dv">2</span>)</span>
<span id="cb1026-3"><a href="algo.html#cb1026-3"></a>}</span></code></pre></div>
<p>El bucle <code>for()</code> puede iterar sobre todos los tipos de elementos.</p>
<div class="sourceCode" id="cb1027"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1027-1"><a href="algo.html#cb1027-1"></a>nChar &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;z&quot;</span>, <span class="st">&quot;e&quot;</span>, <span class="st">&quot;r&quot;</span>, <span class="st">&quot;t&quot;</span>, <span class="st">&quot;y&quot;</span>)</span>
<span id="cb1027-2"><a href="algo.html#cb1027-2"></a><span class="cf">for</span>(i <span class="cf">in</span> nChar){</span>
<span id="cb1027-3"><a href="algo.html#cb1027-3"></a>  <span class="kw">print</span>(i)</span>
<span id="cb1027-4"><a href="algo.html#cb1027-4"></a>}</span></code></pre></div>
<pre><code>## [1] &quot;a&quot;
## [1] &quot;z&quot;
## [1] &quot;e&quot;
## [1] &quot;r&quot;
## [1] &quot;t&quot;
## [1] &quot;y&quot;</code></pre>
<p>Volvamos a nuestro caso. Vamos a iterar sobre el número de líneas de nuestro <code>data.frame</code> <code>bdd</code>. Antes de eso crearemos las columnas <code>dif</code> y <code>isDifBig</code> con los valores <code>NA</code>. Luego usaremos <a href="fonctions.html#l015nrow">la función <code>nrow()</code></a> para encontrar el número de líneas.</p>
<div class="sourceCode" id="cb1029"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1029-1"><a href="algo.html#cb1029-1"></a>bdd<span class="op">$</span>dif &lt;-<span class="st"> </span><span class="ot">NA</span></span>
<span id="cb1029-2"><a href="algo.html#cb1029-2"></a>bdd<span class="op">$</span>isDifBig &lt;-<span class="st"> </span><span class="ot">NA</span></span>
<span id="cb1029-3"><a href="algo.html#cb1029-3"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(bdd)){</span>
<span id="cb1029-4"><a href="algo.html#cb1029-4"></a>  bdd<span class="op">$</span>dif[i] &lt;-<span class="st"> </span><span class="kw">sqrt</span>((bdd<span class="op">$</span>date01[i] <span class="op">-</span><span class="st"> </span>bdd<span class="op">$</span>date02[i])<span class="op">^</span><span class="dv">2</span>)</span>
<span id="cb1029-5"><a href="algo.html#cb1029-5"></a>  <span class="cf">if</span>(bdd<span class="op">$</span>dif[i] <span class="op">&gt;</span><span class="st"> </span><span class="dv">3</span>){</span>
<span id="cb1029-6"><a href="algo.html#cb1029-6"></a>    bdd<span class="op">$</span>isDifBig[i] &lt;-<span class="st"> &quot;big&quot;</span></span>
<span id="cb1029-7"><a href="algo.html#cb1029-7"></a>  }<span class="cf">else</span>{</span>
<span id="cb1029-8"><a href="algo.html#cb1029-8"></a>    bdd<span class="op">$</span>isDifBig[i] &lt;-<span class="st"> &quot;small&quot;</span></span>
<span id="cb1029-9"><a href="algo.html#cb1029-9"></a>  }</span>
<span id="cb1029-10"><a href="algo.html#cb1029-10"></a>}</span>
<span id="cb1029-11"><a href="algo.html#cb1029-11"></a><span class="kw">print</span>(<span class="kw">head</span>(bdd, <span class="dt">n =</span> <span class="dv">20</span>))</span></code></pre></div>
<pre><code>##       date01    date02        dif isDifBig
## 1   9.719458  8.705486 1.01397192    small
## 2  10.615751  8.970232 1.64551906    small
## 3  11.489622  9.578997 1.91062475    small
## 4  10.969352  9.996233 0.97311922    small
## 5  10.763592  8.006116 2.75747609    small
## 6   8.043056 10.352328 2.30927228    small
## 7  10.308829 10.744864 0.43603505    small
## 8  10.328023 10.854178 0.52615479    small
## 9   9.618543  9.221003 0.39753939    small
## 10  8.594911  9.005062 0.41015150    small
## 11 10.257861 10.716142 0.45828025    small
## 12 10.027734 10.582536 0.55480117    small
## 13  9.139714  9.659108 0.51939478    small
## 14  8.493198 11.423924 2.93072531    small
## 15 11.508191 10.753088 0.75510242    small
## 16  9.493427  9.359546 0.13388117    small
## 17 10.795847 10.052996 0.74285027    small
## 18 10.667033 11.476606 0.80957242    small
## 19 10.955230  8.861647 2.09358311    small
## 20  9.279428  9.353000 0.07357146    small</code></pre>
<p>En la práctica, esta no es la mejor manera de realizar este ejercicio porque se trata de cálculos simples en vectores contenidos en un <code>data.frame</code>. R es particularmente potente para realizar operaciones en vectores. Donde sea posible, siempre tenemos que enfócarnos en operaciones vectoriales. Aquí nuestro código se convierte en:</p>
<div class="sourceCode" id="cb1031"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1031-1"><a href="algo.html#cb1031-1"></a>bdd<span class="op">$</span>dif &lt;-<span class="st"> </span><span class="kw">sqrt</span>((bdd<span class="op">$</span>date01 <span class="op">-</span><span class="st"> </span>bdd<span class="op">$</span>date02)<span class="op">^</span><span class="dv">2</span>)</span>
<span id="cb1031-2"><a href="algo.html#cb1031-2"></a>bdd<span class="op">$</span>isDifBig &lt;-<span class="st"> &quot;small&quot;</span></span>
<span id="cb1031-3"><a href="algo.html#cb1031-3"></a>bdd<span class="op">$</span>isDifBig[bdd<span class="op">$</span>dif <span class="op">&gt;</span><span class="st"> </span><span class="dv">3</span>] &lt;-<span class="st"> &quot;big&quot;</span></span>
<span id="cb1031-4"><a href="algo.html#cb1031-4"></a><span class="kw">print</span>(<span class="kw">head</span>(bdd, <span class="dt">n =</span> <span class="dv">20</span>))</span></code></pre></div>
<pre><code>##       date01    date02        dif isDifBig
## 1   9.719458  8.705486 1.01397192    small
## 2  10.615751  8.970232 1.64551906    small
## 3  11.489622  9.578997 1.91062475    small
## 4  10.969352  9.996233 0.97311922    small
## 5  10.763592  8.006116 2.75747609    small
## 6   8.043056 10.352328 2.30927228    small
## 7  10.308829 10.744864 0.43603505    small
## 8  10.328023 10.854178 0.52615479    small
## 9   9.618543  9.221003 0.39753939    small
## 10  8.594911  9.005062 0.41015150    small
## 11 10.257861 10.716142 0.45828025    small
## 12 10.027734 10.582536 0.55480117    small
## 13  9.139714  9.659108 0.51939478    small
## 14  8.493198 11.423924 2.93072531    small
## 15 11.508191 10.753088 0.75510242    small
## 16  9.493427  9.359546 0.13388117    small
## 17 10.795847 10.052996 0.74285027    small
## 18 10.667033 11.476606 0.80957242    small
## 19 10.955230  8.861647 2.09358311    small
## 20  9.279428  9.353000 0.07357146    small</code></pre>
<p>La mayoría de los ejemplos que se pueden encontrar en Internet sobre el bucle <code>for()</code> pueden reemplazarse por operaciones vectoriales. Aquí hay algunos ejemplos adaptados de varias fuentes:</p>
<div class="sourceCode" id="cb1033"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1033-1"><a href="algo.html#cb1033-1"></a><span class="co"># prueba si los números son pares</span></span>
<span id="cb1033-2"><a href="algo.html#cb1033-2"></a><span class="co"># [1] FOR</span></span>
<span id="cb1033-3"><a href="algo.html#cb1033-3"></a>x &lt;-<span class="st"> </span><span class="kw">sample</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">100</span>, <span class="dt">size =</span> <span class="dv">20</span>)</span>
<span id="cb1033-4"><a href="algo.html#cb1033-4"></a>count &lt;-<span class="st"> </span><span class="dv">0</span></span>
<span id="cb1033-5"><a href="algo.html#cb1033-5"></a><span class="cf">for</span> (val <span class="cf">in</span> x) {</span>
<span id="cb1033-6"><a href="algo.html#cb1033-6"></a>  <span class="cf">if</span>(val <span class="op">%%</span><span class="st"> </span><span class="dv">2</span> <span class="op">==</span><span class="st"> </span><span class="dv">0</span>){</span>
<span id="cb1033-7"><a href="algo.html#cb1033-7"></a>    count &lt;-<span class="st"> </span>count <span class="op">+</span><span class="st"> </span><span class="dv">1</span></span>
<span id="cb1033-8"><a href="algo.html#cb1033-8"></a>  }</span>
<span id="cb1033-9"><a href="algo.html#cb1033-9"></a>}</span>
<span id="cb1033-10"><a href="algo.html#cb1033-10"></a><span class="kw">print</span>(count)</span></code></pre></div>
<pre><code>## [1] 10</code></pre>
<div class="sourceCode" id="cb1035"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1035-1"><a href="algo.html#cb1035-1"></a><span class="co"># [2] VECTOR</span></span>
<span id="cb1035-2"><a href="algo.html#cb1035-2"></a><span class="kw">sum</span>(x <span class="op">%%</span><span class="st"> </span><span class="dv">2</span> <span class="op">==</span><span class="st"> </span><span class="dv">0</span>)</span></code></pre></div>
<pre><code>## [1] 10</code></pre>
<div class="sourceCode" id="cb1037"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1037-1"><a href="algo.html#cb1037-1"></a><span class="co"># calcular cuadrados</span></span>
<span id="cb1037-2"><a href="algo.html#cb1037-2"></a><span class="co"># [1] FOR</span></span>
<span id="cb1037-3"><a href="algo.html#cb1037-3"></a>x &lt;-<span class="st"> </span><span class="kw">rep</span>(<span class="dv">0</span>, <span class="dv">20</span>)</span>
<span id="cb1037-4"><a href="algo.html#cb1037-4"></a><span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">20</span>){</span>
<span id="cb1037-5"><a href="algo.html#cb1037-5"></a>  x[j] &lt;-<span class="st"> </span>j<span class="op">^</span><span class="dv">2</span></span>
<span id="cb1037-6"><a href="algo.html#cb1037-6"></a>}</span>
<span id="cb1037-7"><a href="algo.html#cb1037-7"></a><span class="kw">print</span>(x)</span></code></pre></div>
<pre><code>##  [1]   1   4   9  16  25  36  49  64  81 100 121 144 169 196 225 256 289 324 361
## [20] 400</code></pre>
<div class="sourceCode" id="cb1039"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1039-1"><a href="algo.html#cb1039-1"></a><span class="co"># [2] VECTOR</span></span>
<span id="cb1039-2"><a href="algo.html#cb1039-2"></a>(<span class="dv">1</span><span class="op">:</span><span class="dv">20</span>)<span class="op">^</span><span class="dv">2</span></span></code></pre></div>
<pre><code>##  [1]   1   4   9  16  25  36  49  64  81 100 121 144 169 196 225 256 289 324 361
## [20] 400</code></pre>
<div class="sourceCode" id="cb1041"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1041-1"><a href="algo.html#cb1041-1"></a><span class="co"># repetir una tirada de dados y promediar</span></span>
<span id="cb1041-2"><a href="algo.html#cb1041-2"></a><span class="co"># [1] FOR</span></span>
<span id="cb1041-3"><a href="algo.html#cb1041-3"></a>ntrials =<span class="st"> </span><span class="dv">1000</span></span>
<span id="cb1041-4"><a href="algo.html#cb1041-4"></a>trials =<span class="st"> </span><span class="kw">rep</span>(<span class="dv">0</span>, ntrials)</span>
<span id="cb1041-5"><a href="algo.html#cb1041-5"></a><span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span>ntrials){</span>
<span id="cb1041-6"><a href="algo.html#cb1041-6"></a>  trials[j] =<span class="st"> </span><span class="kw">sample</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">6</span>, <span class="dt">size =</span> <span class="dv">1</span>)</span>
<span id="cb1041-7"><a href="algo.html#cb1041-7"></a>}</span>
<span id="cb1041-8"><a href="algo.html#cb1041-8"></a><span class="kw">mean</span>(trials)</span></code></pre></div>
<pre><code>## [1] 3.507</code></pre>
<div class="sourceCode" id="cb1043"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1043-1"><a href="algo.html#cb1043-1"></a><span class="co"># [2] VECTOR</span></span>
<span id="cb1043-2"><a href="algo.html#cb1043-2"></a><span class="kw">mean</span>(<span class="kw">sample</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">6</span>, ntrials, <span class="dt">replace =</span> <span class="ot">TRUE</span>))</span></code></pre></div>
<pre><code>## [1] 3.555</code></pre>
<p>Es un buen ejercicio explorar los muchos ejemplos disponibles en Internet en el bucle <code>for()</code> e intentar convertirlos en operaciones vectoriales. Esto nos permite adquirir buenos reflejos de programación con R. El bucle <code>for()</code> es muy útil, por ejemplo, para leer varios archivos y tratar la información que contienen de la misma manera, hacer gráficos, o Cuando las operaciones vectoriales se vuelven tediosas. Imagina una matriz de 10 columnas y 100 líneas. Queremos la suma de cada línea (veremos cómo hacer con la función <code>apply()</code> mas adelante).</p>
<div class="sourceCode" id="cb1045"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1045-1"><a href="algo.html#cb1045-1"></a>myMat &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="kw">sample</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">100</span>, <span class="dt">size =</span> <span class="dv">1000</span>, <span class="dt">replace =</span> <span class="ot">TRUE</span>), <span class="dt">ncol =</span> <span class="dv">10</span>)</span>
<span id="cb1045-2"><a href="algo.html#cb1045-2"></a><span class="co"># VECTOR</span></span>
<span id="cb1045-3"><a href="algo.html#cb1045-3"></a>sumRow &lt;-<span class="st"> </span>myMat[, <span class="dv">1</span>] <span class="op">+</span><span class="st"> </span>myMat[, <span class="dv">2</span>] <span class="op">+</span><span class="st"> </span>myMat[, <span class="dv">3</span>] <span class="op">+</span><span class="st"> </span>myMat[, <span class="dv">4</span>] <span class="op">+</span><span class="st"> </span></span>
<span id="cb1045-4"><a href="algo.html#cb1045-4"></a><span class="st">  </span>myMat[, <span class="dv">5</span>] <span class="op">+</span><span class="st"> </span>myMat[, <span class="dv">6</span>] <span class="op">+</span><span class="st"> </span>myMat[, <span class="dv">7</span>] <span class="op">+</span><span class="st"> </span>myMat[, <span class="dv">8</span>] <span class="op">+</span><span class="st"> </span></span>
<span id="cb1045-5"><a href="algo.html#cb1045-5"></a><span class="st">  </span>myMat[, <span class="dv">9</span>] <span class="op">+</span><span class="st"> </span>myMat[, <span class="dv">10</span>]</span>
<span id="cb1045-6"><a href="algo.html#cb1045-6"></a><span class="kw">print</span>(sumRow)</span></code></pre></div>
<pre><code>##   [1] 481 565 544 373 650 396 641 595 663 361 456 554 308 591 468 567 606 462
##  [19] 515 619 534 593 592 660 442 373 309 564 398 498 472 507 496 484 481 550
##  [37] 319 334 463 683 472 516 576 655 409 526 524 549 507 521 467 408 566 450
##  [55] 374 677 622 595 529 591 456 468 578 491 471 698 666 387 433 434 361 684
##  [73] 579 470 574 492 540 496 465 458 598 447 502 415 517 461 418 341 318 361
##  [91] 571 637 425 443 540 420 522 490 319 525</code></pre>
<div class="sourceCode" id="cb1047"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1047-1"><a href="algo.html#cb1047-1"></a><span class="co"># FOR</span></span>
<span id="cb1047-2"><a href="algo.html#cb1047-2"></a>sumRow &lt;-<span class="st"> </span><span class="kw">rep</span>(<span class="ot">NA</span>, <span class="dt">times =</span> <span class="kw">nrow</span>(myMat))</span>
<span id="cb1047-3"><a href="algo.html#cb1047-3"></a><span class="cf">for</span>(j <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(myMat)){</span>
<span id="cb1047-4"><a href="algo.html#cb1047-4"></a>  sumRow[j] &lt;-<span class="st"> </span><span class="kw">sum</span>(myMat[j, ])</span>
<span id="cb1047-5"><a href="algo.html#cb1047-5"></a>}</span>
<span id="cb1047-6"><a href="algo.html#cb1047-6"></a><span class="kw">print</span>(sumRow)</span></code></pre></div>
<pre><code>##   [1] 481 565 544 373 650 396 641 595 663 361 456 554 308 591 468 567 606 462
##  [19] 515 619 534 593 592 660 442 373 309 564 398 498 472 507 496 484 481 550
##  [37] 319 334 463 683 472 516 576 655 409 526 524 549 507 521 467 408 566 450
##  [55] 374 677 622 595 529 591 456 468 578 491 471 698 666 387 433 434 361 684
##  [73] 579 470 574 492 540 496 465 458 598 447 502 415 517 461 418 341 318 361
##  [91] 571 637 425 443 540 420 522 490 319 525</code></pre>
<p>En conclusión, se recomienda no usar el bucle <code>for()</code> con R siempre que sea posible, y en este capítulo veremos alternativas como los bucles familiares <code>apply()</code>.</p>
</div>
<div id="l17while" class="section level2">
<h2><span class="header-section-number">9.4</span> El bucle <code>while</code></h2>
<p>El bucle <code>while()</code>, a diferencia del bucle <code>for()</code>, significa <em>MIENTRAS</em>. Mientras no se cumpla una condición, el bucle continuará ejecutándose. Atención porque en caso de error, podemos programar fácilmente bucles que nunca terminan. Este bucle es menos común que el bucle <code>for()</code>. Tomemos un ejemplo:</p>
<div class="sourceCode" id="cb1049"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1049-1"><a href="algo.html#cb1049-1"></a>i &lt;-<span class="st"> </span><span class="dv">0</span></span>
<span id="cb1049-2"><a href="algo.html#cb1049-2"></a><span class="cf">while</span>(i <span class="op">&lt;</span><span class="st"> </span><span class="dv">10</span>){</span>
<span id="cb1049-3"><a href="algo.html#cb1049-3"></a>  <span class="kw">print</span>(i)</span>
<span id="cb1049-4"><a href="algo.html#cb1049-4"></a>  i &lt;-<span class="st"> </span>i <span class="op">+</span><span class="st"> </span><span class="dv">1</span></span>
<span id="cb1049-5"><a href="algo.html#cb1049-5"></a>}</span></code></pre></div>
<pre><code>## [1] 0
## [1] 1
## [1] 2
## [1] 3
## [1] 4
## [1] 5
## [1] 6
## [1] 7
## [1] 8
## [1] 9</code></pre>
<p>En este ejemplo, la variable <code>i</code> tiene como valor inicial 0. MIENTRAS QUE <code>i &lt; 10</code>, mostramos <code>i</code> con <code>print()</code>. Para que este bucle finalice, no olvidamos cambiar el valor de <code>i</code>, esto se hace con la línea <code>i &lt;- i + 1</code>. Cuando la condición <code>i &lt; 10</code> ya no se cumple, el bucle se detiene.</p>
<p>El bucle <code>while()</code> es muy útil para crear scripts que realizarán cálculos en variables cuyo valor cambia con el tiempo. Por ejemplo, imaginamos un número entre 0 y 10000 y un generador aleatorio que intentará determinar el valor de este número. Si queremos limitar los intentos de R a 2 segundos, podemos escribir el siguiente script (que debería funcionar cada vez en una computadora de escritorio típica que pueda realizar fácilmente 35000 pruebas en 2 segundos):</p>
<div class="sourceCode" id="cb1051"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1051-1"><a href="algo.html#cb1051-1"></a>myNumber &lt;-<span class="st"> </span><span class="kw">sample</span>(<span class="dt">x =</span> <span class="dv">10000</span>, <span class="dt">size =</span> <span class="dv">1</span>)</span>
<span id="cb1051-2"><a href="algo.html#cb1051-2"></a>myGuess &lt;-<span class="st"> </span><span class="kw">sample</span>(<span class="dt">x =</span> <span class="dv">10000</span>, <span class="dt">size =</span> <span class="dv">1</span>)</span>
<span id="cb1051-3"><a href="algo.html#cb1051-3"></a>startTime &lt;-<span class="st"> </span><span class="kw">Sys.time</span>()</span>
<span id="cb1051-4"><a href="algo.html#cb1051-4"></a>numberGuess &lt;-<span class="st"> </span><span class="dv">0</span></span>
<span id="cb1051-5"><a href="algo.html#cb1051-5"></a><span class="cf">while</span>(<span class="kw">Sys.time</span>() <span class="op">-</span><span class="st"> </span>startTime <span class="op">&lt;</span><span class="st"> </span><span class="dv">2</span>){</span>
<span id="cb1051-6"><a href="algo.html#cb1051-6"></a>  <span class="cf">if</span>(myGuess <span class="op">==</span><span class="st"> </span>myNumber){</span>
<span id="cb1051-7"><a href="algo.html#cb1051-7"></a>    numberGuess &lt;-<span class="st"> </span>numberGuess <span class="op">+</span><span class="st"> </span><span class="dv">1</span></span>
<span id="cb1051-8"><a href="algo.html#cb1051-8"></a>    <span class="kw">print</span>(<span class="st">&quot;Number found !&quot;</span>)</span>
<span id="cb1051-9"><a href="algo.html#cb1051-9"></a>    <span class="kw">print</span>(<span class="kw">paste0</span>(<span class="st">&quot;And I have plenty of time left: &quot;</span>, </span>
<span id="cb1051-10"><a href="algo.html#cb1051-10"></a>      <span class="kw">round</span>(<span class="dv">2</span> <span class="op">-</span><span class="st"> </span><span class="kw">as.numeric</span>(<span class="kw">Sys.time</span>() <span class="op">-</span><span class="st"> </span>startTime), <span class="dt">digits =</span> <span class="dv">2</span>), </span>
<span id="cb1051-11"><a href="algo.html#cb1051-11"></a>      <span class="st">&quot; sec&quot;</span>))</span>
<span id="cb1051-12"><a href="algo.html#cb1051-12"></a>    <span class="cf">break</span></span>
<span id="cb1051-13"><a href="algo.html#cb1051-13"></a>  }<span class="cf">else</span>{</span>
<span id="cb1051-14"><a href="algo.html#cb1051-14"></a>    myGuess &lt;-<span class="st"> </span><span class="kw">sample</span>(<span class="dt">x =</span> <span class="dv">10000</span>, <span class="dt">size =</span> <span class="dv">1</span>)</span>
<span id="cb1051-15"><a href="algo.html#cb1051-15"></a>    numberGuess &lt;-<span class="st"> </span>numberGuess <span class="op">+</span><span class="st"> </span><span class="dv">1</span></span>
<span id="cb1051-16"><a href="algo.html#cb1051-16"></a>  }</span>
<span id="cb1051-17"><a href="algo.html#cb1051-17"></a>}</span></code></pre></div>
<pre><code>## [1] &quot;Number found !&quot;
## [1] &quot;And I have plenty of time left: 1.5 sec&quot;</code></pre>
<p>En este script generamos un número aleatorio para adivinar con la función <code>sample()</code>, y cada uno de los intentos con la misma función <code>sample()</code>. Luego usamos la función <code>Sys.time()</code> (con una S mayúscula a <code>Sys</code>), para saber la hora de inicio del bucle. Siempre que la diferencia entre cada iteración del bucle y la hora de inicio sea inferior a 2 segundos, el bucle <code>while()</code> verificará si el número correcto estaba adivinando en la prueba lógica con <code>if()</code> y luego si es el caso nos informa que se encontró el número, y nos indica el tiempo restante antes de los dos segundos. Luego para finalizar el bucle usamos la palabra clave “break” en la que volveremos. En resumen, <code>break</code>, permite salir de un bucle. Si no se ha adivinado el número, el bucle realiza otra prueba con la función <code>sample()</code>.</p>
<p>Más concretamente, podríamos imaginar algoritmos para explorar un espacio de soluciones a un problema con un tiempo limitado para lograrlo. El bucle <code>while()</code> también puede ser útil para que un script se ejecute solo cuando un archivo de otro programa esté disponible … En la práctica, el bucle <code>while()</code> se usa poco con R.</p>
</div>
<div id="l17repeat" class="section level2">
<h2><span class="header-section-number">9.5</span> El bucle <code>repeat</code></h2>
<p>El bucle <code>repeat()</code> permite repetir una operación sin condiciones para verificar. Para salir de este bucle debemos usar la palabra clave <code>break</code>.</p>
<div class="sourceCode" id="cb1053"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1053-1"><a href="algo.html#cb1053-1"></a>i &lt;-<span class="st"> </span><span class="dv">1</span></span>
<span id="cb1053-2"><a href="algo.html#cb1053-2"></a><span class="cf">repeat</span>{</span>
<span id="cb1053-3"><a href="algo.html#cb1053-3"></a>  <span class="kw">print</span>(i<span class="op">^</span><span class="dv">2</span>)</span>
<span id="cb1053-4"><a href="algo.html#cb1053-4"></a>  i &lt;-<span class="st"> </span>i <span class="op">+</span><span class="st"> </span><span class="dv">1</span></span>
<span id="cb1053-5"><a href="algo.html#cb1053-5"></a>  <span class="cf">if</span>(i <span class="op">==</span><span class="st"> </span><span class="dv">5</span>){</span>
<span id="cb1053-6"><a href="algo.html#cb1053-6"></a>    <span class="cf">break</span></span>
<span id="cb1053-7"><a href="algo.html#cb1053-7"></a>  }</span>
<span id="cb1053-8"><a href="algo.html#cb1053-8"></a>}</span></code></pre></div>
<pre><code>## [1] 1
## [1] 4
## [1] 9
## [1] 16</code></pre>
<p>Si volvemos al ejemplo anterior, podemos usar un bucle <code>repeat()</code> para repetirlo cinco veces.</p>
<div class="sourceCode" id="cb1055"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1055-1"><a href="algo.html#cb1055-1"></a>numTry &lt;-<span class="st"> </span><span class="dv">0</span></span>
<span id="cb1055-2"><a href="algo.html#cb1055-2"></a><span class="cf">repeat</span>{</span>
<span id="cb1055-3"><a href="algo.html#cb1055-3"></a>  myNumber &lt;-<span class="st"> </span><span class="kw">sample</span>(<span class="dt">x =</span> <span class="dv">10000</span>, <span class="dt">size =</span> <span class="dv">1</span>)</span>
<span id="cb1055-4"><a href="algo.html#cb1055-4"></a>  myGuess &lt;-<span class="st"> </span><span class="kw">sample</span>(<span class="dt">x =</span> <span class="dv">10000</span>, <span class="dt">size =</span> <span class="dv">1</span>)</span>
<span id="cb1055-5"><a href="algo.html#cb1055-5"></a>  startTime &lt;-<span class="st"> </span><span class="kw">Sys.time</span>()</span>
<span id="cb1055-6"><a href="algo.html#cb1055-6"></a>  numberGuess &lt;-<span class="st"> </span><span class="dv">0</span></span>
<span id="cb1055-7"><a href="algo.html#cb1055-7"></a>  <span class="cf">while</span>(<span class="kw">Sys.time</span>() <span class="op">-</span><span class="st"> </span>startTime <span class="op">&lt;</span><span class="st"> </span><span class="dv">2</span>){</span>
<span id="cb1055-8"><a href="algo.html#cb1055-8"></a>    <span class="cf">if</span>(myGuess <span class="op">==</span><span class="st"> </span>myNumber){</span>
<span id="cb1055-9"><a href="algo.html#cb1055-9"></a>      numberGuess &lt;-<span class="st"> </span>numberGuess <span class="op">+</span><span class="st"> </span><span class="dv">1</span></span>
<span id="cb1055-10"><a href="algo.html#cb1055-10"></a>      <span class="kw">print</span>(<span class="kw">round</span>(<span class="kw">as.numeric</span>(<span class="kw">Sys.time</span>() <span class="op">-</span><span class="st"> </span>startTime), <span class="dt">digits =</span> <span class="dv">3</span>))</span>
<span id="cb1055-11"><a href="algo.html#cb1055-11"></a>      <span class="cf">break</span></span>
<span id="cb1055-12"><a href="algo.html#cb1055-12"></a>    }<span class="cf">else</span>{</span>
<span id="cb1055-13"><a href="algo.html#cb1055-13"></a>      myGuess &lt;-<span class="st"> </span><span class="kw">sample</span>(<span class="dt">x =</span> <span class="dv">10000</span>, <span class="dt">size =</span> <span class="dv">1</span>)</span>
<span id="cb1055-14"><a href="algo.html#cb1055-14"></a>      numberGuess &lt;-<span class="st"> </span>numberGuess <span class="op">+</span><span class="st"> </span><span class="dv">1</span></span>
<span id="cb1055-15"><a href="algo.html#cb1055-15"></a>    }</span>
<span id="cb1055-16"><a href="algo.html#cb1055-16"></a>  }</span>
<span id="cb1055-17"><a href="algo.html#cb1055-17"></a>  numTry &lt;-<span class="st"> </span>numTry <span class="op">+</span><span class="st"> </span><span class="dv">1</span></span>
<span id="cb1055-18"><a href="algo.html#cb1055-18"></a>  <span class="cf">if</span>(numTry <span class="op">==</span><span class="st"> </span><span class="dv">5</span>){<span class="cf">break</span>}</span>
<span id="cb1055-19"><a href="algo.html#cb1055-19"></a>}</span></code></pre></div>
<pre><code>## [1] 1.815
## [1] 1.762
## [1] 0.514
## [1] 0.401
## [1] 1.178</code></pre>
<p>Al igual que el bucle <code>while()</code>, el bucle <code>repeat()</code> no se usa mucho con R.</p>
</div>
<div id="l17spe" class="section level2">
<h2><span class="header-section-number">9.6</span> <code>next</code> y <code>break</code></h2>
<p>Ya hemos visto la palabra clave <code>break</code> que permite salir del bucle actual. Por ejemplo, si buscamos el primer dígito después de 111 que es divisible por 32:</p>
<div class="sourceCode" id="cb1057"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1057-1"><a href="algo.html#cb1057-1"></a>myVars &lt;-<span class="st"> </span><span class="dv">111</span><span class="op">:</span><span class="dv">1000</span></span>
<span id="cb1057-2"><a href="algo.html#cb1057-2"></a><span class="cf">for</span>(myVar <span class="cf">in</span> myVars){</span>
<span id="cb1057-3"><a href="algo.html#cb1057-3"></a>  <span class="cf">if</span>(myVar <span class="op">%%</span><span class="st"> </span><span class="dv">32</span> <span class="op">==</span><span class="st"> </span><span class="dv">0</span>){</span>
<span id="cb1057-4"><a href="algo.html#cb1057-4"></a>    <span class="kw">print</span>(myVar)</span>
<span id="cb1057-5"><a href="algo.html#cb1057-5"></a>    <span class="cf">break</span></span>
<span id="cb1057-6"><a href="algo.html#cb1057-6"></a>  }</span>
<span id="cb1057-7"><a href="algo.html#cb1057-7"></a>}</span></code></pre></div>
<pre><code>## [1] 128</code></pre>
<p>Aunque hemos visto que en la práctica podemos evitar el bucle <code>for()</code> con una operación vectorial:</p>
<div class="sourceCode" id="cb1059"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1059-1"><a href="algo.html#cb1059-1"></a>(<span class="dv">111</span><span class="op">:</span><span class="dv">1000</span>)[<span class="dv">111</span><span class="op">:</span><span class="dv">1000</span> <span class="op">%%</span><span class="st"> </span><span class="dv">32</span> <span class="op">==</span><span class="st"> </span><span class="dv">0</span>][<span class="dv">1</span>]</span></code></pre></div>
<pre><code>## [1] 128</code></pre>
<p>La palabra clave <code>next</code> permite pasar a la siguiente iteración de un bucle si se cumple una determinada condición. Por ejemplo, si queremos imprimir las letras del alfabeto sin las vocales:</p>
<div class="sourceCode" id="cb1061"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1061-1"><a href="algo.html#cb1061-1"></a><span class="cf">for</span>(myLetter <span class="cf">in</span> letters){</span>
<span id="cb1061-2"><a href="algo.html#cb1061-2"></a>  <span class="cf">if</span>(myLetter <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;e&quot;</span>, <span class="st">&quot;i&quot;</span>, <span class="st">&quot;o&quot;</span>, <span class="st">&quot;u&quot;</span>, <span class="st">&quot;y&quot;</span>)){</span>
<span id="cb1061-3"><a href="algo.html#cb1061-3"></a>    <span class="cf">next</span></span>
<span id="cb1061-4"><a href="algo.html#cb1061-4"></a>  }</span>
<span id="cb1061-5"><a href="algo.html#cb1061-5"></a>  <span class="kw">print</span>(myLetter)</span>
<span id="cb1061-6"><a href="algo.html#cb1061-6"></a>}</span></code></pre></div>
<pre><code>## [1] &quot;b&quot;
## [1] &quot;c&quot;
## [1] &quot;d&quot;
## [1] &quot;f&quot;
## [1] &quot;g&quot;
## [1] &quot;h&quot;
## [1] &quot;j&quot;
## [1] &quot;k&quot;
## [1] &quot;l&quot;
## [1] &quot;m&quot;
## [1] &quot;n&quot;
## [1] &quot;p&quot;
## [1] &quot;q&quot;
## [1] &quot;r&quot;
## [1] &quot;s&quot;
## [1] &quot;t&quot;
## [1] &quot;v&quot;
## [1] &quot;w&quot;
## [1] &quot;x&quot;
## [1] &quot;z&quot;</code></pre>
<p>De nuevo podimos evitar el bucle <code>for()</code> con:</p>
<div class="sourceCode" id="cb1063"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1063-1"><a href="algo.html#cb1063-1"></a>letters[<span class="op">!</span><span class="st"> </span>letters <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;e&quot;</span>, <span class="st">&quot;i&quot;</span>, <span class="st">&quot;o&quot;</span>, <span class="st">&quot;u&quot;</span>, <span class="st">&quot;y&quot;</span>)]</span></code></pre></div>
<pre><code>##  [1] &quot;b&quot; &quot;c&quot; &quot;d&quot; &quot;f&quot; &quot;g&quot; &quot;h&quot; &quot;j&quot; &quot;k&quot; &quot;l&quot; &quot;m&quot; &quot;n&quot; &quot;p&quot; &quot;q&quot; &quot;r&quot; &quot;s&quot; &quot;t&quot; &quot;v&quot; &quot;w&quot; &quot;x&quot;
## [20] &quot;z&quot;</code></pre>
<p>En conclusión, si usamos bucles, las palabras clave <code>next</code> y <code>break</code> suelen ser muy útiles, pero siempre que sea posible es mejor usar operaciones vectoriales. Cuando no es posible trabajar con vectores, es mejor usar los bucles del tipo <code>apply</code> que son el tema de la siguiente sección.</p>
</div>
<div id="l17applyfamily" class="section level2">
<h2><span class="header-section-number">9.7</span> Los bucles de la familia <code>apply</code></h2>
<div id="l17apply" class="section level3">
<h3><span class="header-section-number">9.7.1</span> <code>apply</code></h3>
<p>La función <code>apply()</code> permite aplicar una función a todos los elementos de un <code>array</code> o un <code>matrix</code>. Por ejemplo, si queremos saber la suma de cada fila de una <code>matriz</code> de 10 columnas y 100 líneas:</p>
<div class="sourceCode" id="cb1065"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1065-1"><a href="algo.html#cb1065-1"></a>myMat &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="kw">sample</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">100</span>, <span class="dt">size =</span> <span class="dv">1000</span>, <span class="dt">replace =</span> <span class="ot">TRUE</span>), <span class="dt">ncol =</span> <span class="dv">10</span>)</span>
<span id="cb1065-2"><a href="algo.html#cb1065-2"></a><span class="kw">apply</span>(<span class="dt">X =</span> myMat, <span class="dt">MARGIN =</span> <span class="dv">1</span>, <span class="dt">FUN =</span> sum)</span></code></pre></div>
<pre><code>##   [1] 466 475 521 450 338 625 400 514 672 397 546 438 574 557 469 512 377 613
##  [19] 514 482 630 660 452 491 436 737 623 706 606 452 587 417 504 458 506 508
##  [37] 614 463 562 525 465 357 459 598 469 370 452 413 497 347 545 454 307 629
##  [55] 455 603 497 325 435 563 332 727 664 425 348 467 554 540 604 462 425 454
##  [73] 232 383 530 659 396 501 500 716 531 403 475 518 457 594 329 350 403 464
##  [91] 493 589 667 314 489 613 542 602 433 547</code></pre>
<p>Si queremos saber la mediana de cada columna, la expresión se convierte en:</p>
<div class="sourceCode" id="cb1067"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1067-1"><a href="algo.html#cb1067-1"></a><span class="kw">apply</span>(<span class="dt">X =</span> myMat, <span class="dt">MARGIN =</span> <span class="dv">2</span>, <span class="dt">FUN =</span> median)</span></code></pre></div>
<pre><code>##  [1] 41.0 47.5 55.0 56.5 47.0 39.5 56.0 58.0 50.0 50.0</code></pre>
<p>El argumento <code>X</code> es el objeto en el que el bucle <code>apply</code> se repetirá. El argumento <code>MARGEN</code> corresponde a la dimensión a tener en cuenta (1 para las filas y 2 para las columnas). El argumento <code>FUN</code> es la función a aplicar. En un objeto <code>array</code>, el argumento <code>MARGIN</code> puede tomar tantos valores como dimensiones. En este ejemplo, <code>MARGIN = 1</code> es el promedio de cada fila - dimensión 1 - (todas las dimensiones combinadas), <code>MARGIN = 2</code> es el promedio de cada columna - dimensión 2 - (todas las dimensiones combinadas), y <code>MARGEN = 3</code> es el promedio de cada dimensión 3. Debajo cada cálculo se realiza de dos maneras diferentes para explicar su operación.</p>
<div class="sourceCode" id="cb1069"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1069-1"><a href="algo.html#cb1069-1"></a>myArr &lt;-<span class="st"> </span><span class="kw">array</span>(<span class="kw">sample</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">100</span>, <span class="dt">size =</span> <span class="dv">1000</span>, <span class="dt">replace =</span> <span class="ot">TRUE</span>), <span class="dt">dim =</span> <span class="kw">c</span>(<span class="dv">10</span>, <span class="dv">20</span>, <span class="dv">5</span>))</span>
<span id="cb1069-2"><a href="algo.html#cb1069-2"></a><span class="kw">apply</span>(<span class="dt">X =</span> myArr, <span class="dt">MARGIN =</span> <span class="dv">1</span>, <span class="dt">FUN =</span> mean)</span></code></pre></div>
<pre><code>##  [1] 48.62 50.92 50.28 51.40 51.26 49.71 50.68 45.50 51.09 47.90</code></pre>
<div class="sourceCode" id="cb1071"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1071-1"><a href="algo.html#cb1071-1"></a>(<span class="kw">apply</span>(myArr[,,<span class="dv">1</span>], <span class="dv">1</span>, mean) <span class="op">+</span><span class="st"> </span><span class="kw">apply</span>(myArr[,,<span class="dv">2</span>], <span class="dv">1</span>, mean) <span class="op">+</span><span class="st"> </span></span>
<span id="cb1071-2"><a href="algo.html#cb1071-2"></a><span class="st">  </span><span class="kw">apply</span>(myArr[,,<span class="dv">3</span>], <span class="dv">1</span>, mean) <span class="op">+</span><span class="st"> </span><span class="kw">apply</span>(myArr[,,<span class="dv">4</span>], <span class="dv">1</span>, mean) <span class="op">+</span><span class="st"> </span></span>
<span id="cb1071-3"><a href="algo.html#cb1071-3"></a><span class="st">  </span><span class="kw">apply</span>(myArr[,,<span class="dv">5</span>], <span class="dv">1</span>, mean))<span class="op">/</span><span class="dv">5</span></span></code></pre></div>
<pre><code>##  [1] 48.62 50.92 50.28 51.40 51.26 49.71 50.68 45.50 51.09 47.90</code></pre>
<div class="sourceCode" id="cb1073"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1073-1"><a href="algo.html#cb1073-1"></a><span class="kw">apply</span>(<span class="dt">X =</span> myArr, <span class="dt">MARGIN =</span> <span class="dv">2</span>, <span class="dt">FUN =</span> mean)</span></code></pre></div>
<pre><code>##  [1] 52.22 46.72 51.88 47.74 54.60 47.28 53.46 49.02 50.44 48.44 54.82 47.60
## [13] 50.30 43.50 40.76 55.16 51.50 50.90 47.88 50.50</code></pre>
<div class="sourceCode" id="cb1075"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1075-1"><a href="algo.html#cb1075-1"></a>(<span class="kw">apply</span>(myArr[,,<span class="dv">1</span>], <span class="dv">2</span>, mean) <span class="op">+</span><span class="st"> </span><span class="kw">apply</span>(myArr[,,<span class="dv">2</span>], <span class="dv">2</span>, mean) <span class="op">+</span><span class="st"> </span></span>
<span id="cb1075-2"><a href="algo.html#cb1075-2"></a><span class="st">  </span><span class="kw">apply</span>(myArr[,,<span class="dv">3</span>], <span class="dv">2</span>, mean) <span class="op">+</span><span class="st"> </span><span class="kw">apply</span>(myArr[,,<span class="dv">4</span>], <span class="dv">2</span>, mean) <span class="op">+</span><span class="st"> </span></span>
<span id="cb1075-3"><a href="algo.html#cb1075-3"></a><span class="st">  </span><span class="kw">apply</span>(myArr[,,<span class="dv">5</span>], <span class="dv">2</span>, mean))<span class="op">/</span><span class="dv">5</span></span></code></pre></div>
<pre><code>##  [1] 52.22 46.72 51.88 47.74 54.60 47.28 53.46 49.02 50.44 48.44 54.82 47.60
## [13] 50.30 43.50 40.76 55.16 51.50 50.90 47.88 50.50</code></pre>
<div class="sourceCode" id="cb1077"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1077-1"><a href="algo.html#cb1077-1"></a><span class="kw">apply</span>(<span class="dt">X =</span> myArr, <span class="dt">MARGIN =</span> <span class="dv">3</span>, <span class="dt">FUN =</span> mean)</span></code></pre></div>
<pre><code>## [1] 49.735 47.330 49.255 51.605 50.755</code></pre>
<div class="sourceCode" id="cb1079"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1079-1"><a href="algo.html#cb1079-1"></a><span class="kw">c</span>(<span class="kw">mean</span>(myArr[,,<span class="dv">1</span>]), <span class="kw">mean</span>(myArr[,,<span class="dv">2</span>]), <span class="kw">mean</span>(myArr[,,<span class="dv">3</span>]), </span>
<span id="cb1079-2"><a href="algo.html#cb1079-2"></a>  <span class="kw">mean</span>(myArr[,,<span class="dv">4</span>]), <span class="kw">mean</span>(myArr[,,<span class="dv">5</span>]))</span></code></pre></div>
<pre><code>## [1] 49.735 47.330 49.255 51.605 50.755</code></pre>
<p>También podemos calcular el promedio de cada fila y valor de columna (la función luego itera en la dimensión 3):</p>
<div class="sourceCode" id="cb1081"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1081-1"><a href="algo.html#cb1081-1"></a><span class="kw">apply</span>(<span class="dt">X =</span> myArr, <span class="dt">MARGIN =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>), <span class="dt">FUN =</span> mean)</span></code></pre></div>
<pre><code>##       [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10] [,11] [,12] [,13]
##  [1,] 49.4 34.0 80.6 44.2 60.2 59.0 63.8 27.2 34.8  50.4  62.4  45.0  40.6
##  [2,] 48.6 43.8 33.2 47.0 76.6 50.4 67.2 70.0 51.2  33.0  42.2  69.6  40.8
##  [3,] 64.6 39.6 46.2 71.8 57.0 45.8 58.2 35.4 59.6  54.2  44.6  59.2  28.0
##  [4,] 31.2 57.6 56.8 36.2 56.0 59.8 59.6 54.8 42.6  43.0  42.4  64.0  46.0
##  [5,] 73.4 55.0 59.8 45.2 59.8 44.8 46.2 36.2 58.4  35.2  65.4  41.4  70.4
##  [6,] 43.4 49.4 30.4 65.6 59.6 31.2 53.4 77.2 41.0  54.6  66.8  28.8  70.2
##  [7,] 53.2 58.8 44.6 52.0 46.8 33.2 34.0 39.8 41.8  40.6  58.0  66.8  54.8
##  [8,] 43.8 17.4 58.0 16.8 42.0 71.8 32.8 34.0 60.8  63.2  53.0  39.2  45.6
##  [9,] 79.0 51.6 68.8 47.0 59.4 53.4 53.0 62.0 50.8  56.8  52.8  19.4  67.8
## [10,] 35.6 60.0 40.4 51.6 28.6 23.4 66.4 53.6 63.4  53.4  60.6  42.6  38.8
##       [,14] [,15] [,16] [,17] [,18] [,19] [,20]
##  [1,]  26.8  63.4  37.2  52.6  52.6  53.8  34.4
##  [2,]  36.8  52.6  65.8  45.8  40.6  53.4  49.8
##  [3,]  33.4  31.8  69.0  58.2  63.0  46.0  40.0
##  [4,]  45.4  30.2  60.8  53.0  47.0  65.6  76.0
##  [5,]  59.6  49.6  48.8  51.8  30.2  59.0  35.0
##  [6,]  59.4  26.8  60.2  52.2  48.0  26.8  49.2
##  [7,]  45.4  39.8  67.2  56.6  74.4  36.4  69.4
##  [8,]  41.0  35.6  45.8  45.2  54.4  44.4  65.2
##  [9,]  23.2  41.0  40.0  46.8  61.6  39.0  48.4
## [10,]  64.0  36.8  56.8  52.8  37.2  54.4  37.6</code></pre>
</div>
<div id="l17sapply" class="section level3">
<h3><span class="header-section-number">9.7.2</span> <code>lapply</code></h3>
<p>Como se indica en la documentación, <code>lapply()</code> devuelve una lista de la misma longitud que <code>X</code>, y cada elemento resulta de la aplicación <code>FUN</code> al elemento <code>X</code> correspondiente. Si <code>X</code> es una <code>list</code> que contiene <code>vector</code> y estamos tratando de obtener el promedio de cada elemento de <code>list</code>, podemos usar la función <code>lapply()</code>:</p>
<div class="sourceCode" id="cb1083"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1083-1"><a href="algo.html#cb1083-1"></a>myList &lt;-<span class="st"> </span><span class="kw">list</span>(</span>
<span id="cb1083-2"><a href="algo.html#cb1083-2"></a>  <span class="dt">a =</span> <span class="kw">sample</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">100</span>, <span class="dt">size =</span> <span class="dv">10</span>), </span>
<span id="cb1083-3"><a href="algo.html#cb1083-3"></a>  <span class="dt">b =</span> <span class="kw">sample</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">100</span>, <span class="dt">size =</span> <span class="dv">10</span>), </span>
<span id="cb1083-4"><a href="algo.html#cb1083-4"></a>  <span class="dt">c =</span> <span class="kw">sample</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">100</span>, <span class="dt">size =</span> <span class="dv">10</span>), </span>
<span id="cb1083-5"><a href="algo.html#cb1083-5"></a>  <span class="dt">d =</span> <span class="kw">sample</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">100</span>, <span class="dt">size =</span> <span class="dv">10</span>), </span>
<span id="cb1083-6"><a href="algo.html#cb1083-6"></a>  <span class="dt">e =</span> <span class="kw">sample</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">100</span>, <span class="dt">size =</span> <span class="dv">10</span>)</span>
<span id="cb1083-7"><a href="algo.html#cb1083-7"></a>)</span>
<span id="cb1083-8"><a href="algo.html#cb1083-8"></a><span class="kw">print</span>(myList)</span></code></pre></div>
<pre><code>## $a
##  [1] 66 80 28 87  5 20 36 16 74  3
## 
## $b
##  [1]  4 13 80 25 69 59 48 49 54 81
## 
## $c
##  [1] 30 34 73 44 71 74 42 54 16 91
## 
## $d
##  [1] 86 17 66 15 57  1 40 59 69  7
## 
## $e
##  [1] 64 25 89 66 88 17 77 43 29 42</code></pre>
<div class="sourceCode" id="cb1085"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1085-1"><a href="algo.html#cb1085-1"></a><span class="kw">lapply</span>(myList, <span class="dt">FUN =</span> mean)</span></code></pre></div>
<pre><code>## $a
## [1] 41.5
## 
## $b
## [1] 48.2
## 
## $c
## [1] 52.9
## 
## $d
## [1] 41.7
## 
## $e
## [1] 54</code></pre>
<p>Al igual que con la función <code>apply()</code>, podemos pasar argumentos adicionales a la función <code>lapply()</code> agregándolos después de la función. Esto es útil, por ejemplo, si nuestra <code>list</code> contiene estos valores faltantes <code>NA</code> y queremos ignorarlos para calcular los promedios (con el argumento <code>na.rm = TRUE</code>).</p>
<div class="sourceCode" id="cb1087"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1087-1"><a href="algo.html#cb1087-1"></a>myList &lt;-<span class="st"> </span><span class="kw">list</span>(</span>
<span id="cb1087-2"><a href="algo.html#cb1087-2"></a>  <span class="dt">a =</span> <span class="kw">sample</span>(<span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>, <span class="ot">NA</span>), <span class="dt">size =</span> <span class="dv">10</span>, <span class="dt">replace =</span> <span class="ot">TRUE</span>), </span>
<span id="cb1087-3"><a href="algo.html#cb1087-3"></a>  <span class="dt">b =</span> <span class="kw">sample</span>(<span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>, <span class="ot">NA</span>), <span class="dt">size =</span> <span class="dv">10</span>, <span class="dt">replace =</span> <span class="ot">TRUE</span>), </span>
<span id="cb1087-4"><a href="algo.html#cb1087-4"></a>  <span class="dt">c =</span> <span class="kw">sample</span>(<span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>, <span class="ot">NA</span>), <span class="dt">size =</span> <span class="dv">10</span>, <span class="dt">replace =</span> <span class="ot">TRUE</span>), </span>
<span id="cb1087-5"><a href="algo.html#cb1087-5"></a>  <span class="dt">d =</span> <span class="kw">sample</span>(<span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>, <span class="ot">NA</span>), <span class="dt">size =</span> <span class="dv">10</span>, <span class="dt">replace =</span> <span class="ot">TRUE</span>), </span>
<span id="cb1087-6"><a href="algo.html#cb1087-6"></a>  <span class="dt">e =</span> <span class="kw">sample</span>(<span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>, <span class="ot">NA</span>), <span class="dt">size =</span> <span class="dv">10</span>, <span class="dt">replace =</span> <span class="ot">TRUE</span>)</span>
<span id="cb1087-7"><a href="algo.html#cb1087-7"></a>)</span>
<span id="cb1087-8"><a href="algo.html#cb1087-8"></a><span class="kw">print</span>(myList)</span></code></pre></div>
<pre><code>## $a
##  [1]  5  5 NA  1 NA  4  1  5  3  5
## 
## $b
##  [1] NA NA  3  1  5  2  2  5  5  4
## 
## $c
##  [1]  5  4  1  3  2  2  4  1 NA  5
## 
## $d
##  [1]  2  4  5 NA  1 NA  4  3  3  2
## 
## $e
##  [1]  3 NA NA  2  3  4  2  5  5  5</code></pre>
<div class="sourceCode" id="cb1089"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1089-1"><a href="algo.html#cb1089-1"></a><span class="kw">lapply</span>(myList, <span class="dt">FUN =</span> mean)</span></code></pre></div>
<pre><code>## $a
## [1] NA
## 
## $b
## [1] NA
## 
## $c
## [1] NA
## 
## $d
## [1] NA
## 
## $e
## [1] NA</code></pre>
<div class="sourceCode" id="cb1091"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1091-1"><a href="algo.html#cb1091-1"></a><span class="kw">lapply</span>(myList, <span class="dt">FUN =</span> mean, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</span></code></pre></div>
<pre><code>## $a
## [1] 3.625
## 
## $b
## [1] 3.375
## 
## $c
## [1] 3
## 
## $d
## [1] 3
## 
## $e
## [1] 3.625</code></pre>
<p>Para mayor legibilidad o si se debemos realizar varias operaciones dentro del argumento <code>FUN</code>, podemos usar el siguiente script:</p>
<div class="sourceCode" id="cb1093"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1093-1"><a href="algo.html#cb1093-1"></a><span class="kw">lapply</span>(myList, <span class="dt">FUN =</span> <span class="cf">function</span>(i){</span>
<span id="cb1093-2"><a href="algo.html#cb1093-2"></a>  <span class="kw">mean</span>(i, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</span>
<span id="cb1093-3"><a href="algo.html#cb1093-3"></a>})</span></code></pre></div>
<pre><code>## $a
## [1] 3.625
## 
## $b
## [1] 3.375
## 
## $c
## [1] 3
## 
## $d
## [1] 3
## 
## $e
## [1] 3.625</code></pre>
<p>Por ejemplo, si queremos obtener <code>i^2</code> si el promedio es mayor que 3, y <code>i^3</code> de lo contrario:</p>
<div class="sourceCode" id="cb1095"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1095-1"><a href="algo.html#cb1095-1"></a><span class="kw">lapply</span>(myList, <span class="dt">FUN =</span> <span class="cf">function</span>(i){</span>
<span id="cb1095-2"><a href="algo.html#cb1095-2"></a>  m &lt;-<span class="st"> </span><span class="kw">mean</span>(i, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</span>
<span id="cb1095-3"><a href="algo.html#cb1095-3"></a>  <span class="cf">if</span>(m <span class="op">&gt;</span><span class="st"> </span><span class="dv">3</span>){</span>
<span id="cb1095-4"><a href="algo.html#cb1095-4"></a>    <span class="kw">return</span>(i<span class="op">^</span><span class="dv">2</span>)  </span>
<span id="cb1095-5"><a href="algo.html#cb1095-5"></a>  }<span class="cf">else</span>{</span>
<span id="cb1095-6"><a href="algo.html#cb1095-6"></a>    <span class="kw">return</span>(i<span class="op">^</span><span class="dv">3</span>)</span>
<span id="cb1095-7"><a href="algo.html#cb1095-7"></a>  }</span>
<span id="cb1095-8"><a href="algo.html#cb1095-8"></a>})</span></code></pre></div>
<pre><code>## $a
##  [1] 25 25 NA  1 NA 16  1 25  9 25
## 
## $b
##  [1] NA NA  9  1 25  4  4 25 25 16
## 
## $c
##  [1] 125  64   1  27   8   8  64   1  NA 125
## 
## $d
##  [1]   8  64 125  NA   1  NA  64  27  27   8
## 
## $e
##  [1]  9 NA NA  4  9 16  4 25 25 25</code></pre>
</div>
<div id="l17lapply" class="section level3">
<h3><span class="header-section-number">9.7.3</span> <code>sapply</code></h3>
<p>La función <code>sapply()</code> es una versión modificada de la función <code>lapply()</code> que realiza la misma operación pero devuelve el resultado en un formato simplificado siempre que sea posible.</p>
<div class="sourceCode" id="cb1097"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1097-1"><a href="algo.html#cb1097-1"></a><span class="kw">lapply</span>(myList, <span class="dt">FUN =</span> <span class="cf">function</span>(i){</span>
<span id="cb1097-2"><a href="algo.html#cb1097-2"></a>  <span class="kw">mean</span>(i, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</span>
<span id="cb1097-3"><a href="algo.html#cb1097-3"></a>})</span></code></pre></div>
<pre><code>## $a
## [1] 3.625
## 
## $b
## [1] 3.375
## 
## $c
## [1] 3
## 
## $d
## [1] 3
## 
## $e
## [1] 3.625</code></pre>
<div class="sourceCode" id="cb1099"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1099-1"><a href="algo.html#cb1099-1"></a><span class="kw">sapply</span>(myList, <span class="dt">FUN =</span> <span class="cf">function</span>(i){</span>
<span id="cb1099-2"><a href="algo.html#cb1099-2"></a>  <span class="kw">mean</span>(i, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</span>
<span id="cb1099-3"><a href="algo.html#cb1099-3"></a>})</span></code></pre></div>
<pre><code>##     a     b     c     d     e 
## 3.625 3.375 3.000 3.000 3.625</code></pre>
<p>La función <code>sapply()</code> es interesante para recuperar, por ejemplo, el elemento “n” de cada elemento de una <code>list</code>. La función que se llama para hacer esto es <code>'[['</code>.</p>
<div class="sourceCode" id="cb1101"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1101-1"><a href="algo.html#cb1101-1"></a><span class="kw">sapply</span>(myList, <span class="dt">FUN =</span> <span class="st">&#39;[[&#39;</span>, <span class="dv">2</span>)</span></code></pre></div>
<pre><code>##  a  b  c  d  e 
##  5 NA  4  4 NA</code></pre>
</div>
<div id="l17tapply" class="section level3">
<h3><span class="header-section-number">9.7.4</span> <code>tapply</code></h3>
<p>La función <code>tapply()</code> permite aplicar una función tomando como elemento para iterar una variable existente. Imaginamos información sobre especies representadas por letras mayúsculas (por ejemplo, A, B, C) y valores de mediciones biologicas en diferentes ubicaciones.</p>
<div class="sourceCode" id="cb1103"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1103-1"><a href="algo.html#cb1103-1"></a>species &lt;-<span class="st"> </span><span class="kw">sample</span>(LETTERS[<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>], <span class="dt">size =</span> <span class="dv">1000</span>, <span class="dt">replace =</span> <span class="ot">TRUE</span>)</span>
<span id="cb1103-2"><a href="algo.html#cb1103-2"></a>perf1 &lt;-<span class="st"> </span><span class="kw">rnorm</span>(<span class="dt">n =</span> <span class="dv">1000</span>, <span class="dt">mean =</span> <span class="dv">10</span>, <span class="dt">sd =</span> <span class="fl">0.5</span>)</span>
<span id="cb1103-3"><a href="algo.html#cb1103-3"></a>perf2 &lt;-<span class="st"> </span><span class="kw">rlnorm</span>(<span class="dt">n =</span> <span class="dv">1000</span>, <span class="dt">meanlog =</span> <span class="dv">10</span>, <span class="dt">sdlog =</span> <span class="fl">0.5</span>)</span>
<span id="cb1103-4"><a href="algo.html#cb1103-4"></a>perf3 &lt;-<span class="st"> </span><span class="kw">rgamma</span>(<span class="dt">n =</span> <span class="dv">1000</span>, <span class="dt">shape =</span> <span class="dv">10</span>, <span class="dt">rate =</span> <span class="fl">0.5</span>)</span>
<span id="cb1103-5"><a href="algo.html#cb1103-5"></a>dfSpecies &lt;-<span class="st"> </span><span class="kw">data.frame</span>(species, perf1, perf2, perf3)</span>
<span id="cb1103-6"><a href="algo.html#cb1103-6"></a><span class="kw">print</span>(<span class="kw">head</span>(dfSpecies, <span class="dt">n =</span> <span class="dv">10</span>))</span></code></pre></div>
<pre><code>##    species     perf1     perf2    perf3
## 1        I 10.552482 37912.909 18.80485
## 2        J  9.751189 13189.195 18.80356
## 3        A 10.144902 39912.922 18.69480
## 4        H 10.148621  7754.008 21.72357
## 5        E 10.586563 27810.099 29.73283
## 6        C  9.700371 30946.839 18.74036
## 7        J 10.647680 11360.460 14.56589
## 8        F 10.292551 33135.372 19.02871
## 9        B 10.276133 23966.861 19.81957
## 10       J 10.425206 44413.271 12.48840</code></pre>
<p>Podemos obtener fácilmente un resumen de las mediciones para cada especie con la función <code>tapply()</code> y la función <code>summary()</code>.</p>
<div class="sourceCode" id="cb1105"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1105-1"><a href="algo.html#cb1105-1"></a><span class="kw">tapply</span>(dfSpecies<span class="op">$</span>perf1, <span class="dt">INDEX =</span> dfSpecies<span class="op">$</span>species, <span class="dt">FUN =</span> summary)</span></code></pre></div>
<pre><code>## $A
##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##   8.705   9.632  10.021   9.981  10.363  11.176 
## 
## $B
##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##   8.937   9.663  10.045  10.044  10.423  11.475 
## 
## $C
##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##   9.224   9.791  10.005  10.082  10.419  11.478 
## 
## $D
##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##   8.956   9.669   9.957   9.951  10.238  11.188 
## 
## $E
##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##   7.722   9.701  10.045   9.993  10.375  11.033 
## 
## $F
##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##   8.638   9.623   9.906   9.904  10.257  11.108 
## 
## $G
##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##   9.025   9.625  10.035  10.036  10.419  11.251 
## 
## $H
##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##   8.812   9.715  10.016  10.023  10.341  11.345 
## 
## $I
##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##   8.834   9.704  10.023  10.029  10.290  11.219 
## 
## $J
##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##   8.673   9.738  10.061  10.058  10.429  11.369</code></pre>
<p>También podemos obtener el valor promedio de cada mediciones combinando una función <code>sapply()</code> con la función <code>tapply()</code> y usando la función <code>mean()</code>.</p>
<div class="sourceCode" id="cb1107"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1107-1"><a href="algo.html#cb1107-1"></a><span class="kw">sapply</span>(<span class="dv">2</span><span class="op">:</span><span class="dv">4</span>, <span class="dt">FUN =</span> <span class="cf">function</span>(i){</span>
<span id="cb1107-2"><a href="algo.html#cb1107-2"></a>  <span class="kw">tapply</span>(dfSpecies[,i], <span class="dt">INDEX =</span> dfSpecies<span class="op">$</span>species, <span class="dt">FUN =</span> mean)</span>
<span id="cb1107-3"><a href="algo.html#cb1107-3"></a>})</span></code></pre></div>
<pre><code>##        [,1]     [,2]     [,3]
## A  9.981495 25144.20 21.38752
## B 10.043625 26366.71 19.57132
## C 10.082289 24220.55 19.64893
## D  9.951089 26190.32 20.08122
## E  9.992532 24903.84 20.86645
## F  9.903630 24182.43 19.31994
## G 10.035897 23646.77 20.75494
## H 10.023432 24584.59 19.60410
## I 10.029309 24588.44 19.78836
## J 10.057717 24406.67 20.25933</code></pre>
</div>
<div id="l17mapply" class="section level3">
<h3><span class="header-section-number">9.7.5</span> <code>mapply</code></h3>
<p>La función <code>mapply()</code> es una versión de la función <code>sapply()</code> que usa múltiples argumentos. Por ejemplo, si tenemos una lista de dos elementos <code>1:5</code> y <code>5:1</code> y queremos agregar <code>10</code> al primer elemento y <code>100</code> al segundo elemento:</p>
<div class="sourceCode" id="cb1109"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1109-1"><a href="algo.html#cb1109-1"></a><span class="kw">mapply</span>(<span class="dt">FUN =</span> <span class="cf">function</span>(i, j){i<span class="op">+</span>j}, <span class="dt">i =</span> <span class="kw">list</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>, <span class="dv">5</span><span class="op">:</span><span class="dv">1</span>), <span class="dt">j =</span> <span class="kw">c</span>(<span class="dv">10</span>, <span class="dv">100</span>))</span></code></pre></div>
<pre><code>##      [,1] [,2]
## [1,]   11  105
## [2,]   12  104
## [3,]   13  103
## [4,]   14  102
## [5,]   15  101</code></pre>
</div>
</div>
<div id="conclusión-6" class="section level2">
<h2><span class="header-section-number">9.8</span> Conclusión</h2>
<p>Felicitaciones, hemos llegado al final de este capítulo sobre algoritmos. Recordemos este mensaje clave: cuando una operación debe realizarse más de dos veces en un script y repetir el código que ya se ha escrito, es un signo que nos debe llevar a utilizar un bucle. Sin embargo, siempre que sea posible, se recomienda no usar los bucles tradicionales <code>for()</code>, <code>while()</code>, y <code>repeat()</code>, sino preferir operaciones sobre vectores o bucles de la familia <code>apply</code>. Esto puede ser difícil de integrar al principio, pero veremos que nuestros scripts serán más fáciles de mantener y leer, y mucho más eficientes si seguimos estos hábitos.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="import.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="project.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/frareb/myRBook_SP/edit/master/017_boucles.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["myRBook_SP.pdf", "myRBook_SP.epub"],
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
